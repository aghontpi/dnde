(this["webpackJsonpdnde-mail-editor"]=this["webpackJsonpdnde-mail-editor"]||[]).push([[0],{180:function(e,t,n){e.exports={wrapper:"UiWrapper_wrapper__23xNH",container:"UiWrapper_container__2hsjd",button:"UiWrapper_button__25Pv1",text:"UiWrapper_text__3oy98",image:"UiWrapper_image__3F-94",html:"UiWrapper_html__12ygP",spacer:"UiWrapper_spacer__1yYqc",divider:"UiWrapper_divider__B19qo",social:"UiWrapper_social__3MvUF",section:"UiWrapper_section__2ovUo"}},2065:function(e,t,n){},2066:function(e,t,n){e.exports={"ant-modal":"Preview_ant-modal__3_7T8","andt-modal-centered":"Preview_andt-modal-centered__3GZwp"}},2069:function(e,t,n){},2070:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(40),c=n.n(o),s=(n(312),n(68)),l=n.n(s),d=n(96),u=n(151),b=n(39),p=n(34),j=n(59),f=n(35),h=n(306),g=n.p+"static/media/new_template.3bcc1262.svg",m=n(5),x=f.a.div(a||(a=Object(p.a)(["\n  flex: 1 1 0%;\n  border: 0.4px solid rgb(225, 230, 242);\n  filter: drop-shadow(rgba(0, 0, 0, 0.08) 4px 4px 4px);\n  max-height: 500px;\n  min-height: 150px;\n  height: min-content;\n  max-width: 280px;\n  overflow: hidden;\n  border-radius: 4px;\n  margin-bottom: 25px;\n  transition: all 0.2s ease 0s;\n  position: relative;\n  text-align: center;\n  margin: 0 auto;\n\n  .hoverItem {\n    display: none;\n    position: absolute;\n    inset: 0px;\n    background: rgba(255, 255, 255, 0.9);\n    padding: 20px;\n    flex-direction: column;\n    .content {\n      display: flex;\n      flex: 1;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n    }\n  }\n\n  .hoverItem.alwaysActive {\n    display: flex;\n    background: unset;\n  }\n\n  &:hover {\n    box-shadow: rgb(0 0 0 / 15%) 0px 5px 20px;\n    .hoverItem {\n      display: flex;\n    }\n  }\n\n  img,\n  .newTemplate {\n    max-width: 280px;\n  }\n  .newTemplate {\n    max-height: 500px;\n    min-height: 250px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding-bottom: 60px;\n  }\n\n  .btn-choose {\n    padding: 8px 16px;\n    text-transform: capitalize;\n  }\n"]))),v=function(){var e=Object(b.h)(),t=Object(b.j)().path;return Object(m.jsxs)(x,{children:[Object(m.jsx)("div",{className:"newTemplate",children:Object(m.jsx)(h.a,{style:{fontSize:"40px"}})}),Object(m.jsx)("div",{className:"hoverItem alwaysActive",children:Object(m.jsx)("div",{className:"content",children:Object(m.jsx)(j.a,{onClick:function(){e.push("".concat(t,"/template/new"))},size:"large",type:"primary",className:"btn-choose",children:"New Template"})})}),Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:g,alt:"img new template"})})]})},O=function(e){var t=e.image,n=e.id,a=e.skeleton,r=Object(b.h)(),i=Object(b.j)().path;return Object(m.jsxs)(x,{children:[a?Object(m.jsx)("div",{style:{height:"350px",minWidth:"280px",maxWidth:"280px",padding:"24px 24px"},children:a}):Object(m.jsx)("img",{height:"350px",src:t,alt:"preview"}),Object(m.jsx)("div",{className:"hoverItem",children:Object(m.jsx)("div",{className:"content",children:Object(m.jsx)(j.a,{onClick:function(){r.push("".concat(i,"/template/").concat(n))},size:"large",type:"primary",className:"btn-choose",children:"choose"})})})]})},y=(n(318),n(286)),k=n(60),w=Object(y.a)({baseQuery:Object(k.d)({baseUrl:"https://us-central1-dnde-f4e90.cloudfunctions.net/api/"}),endpoints:function(e){return{getTemplates:e.query({query:function(){return"templates/"}}),getTemplate:e.query({query:function(e){var t=e.id;return"templates/".concat(t)}}),sendMail:e.mutation({query:function(e){return{url:"mail/demomail/",method:"POST",body:e}}})}}}),C=w.useGetTemplatesQuery,S=w.useLazyGetTemplateQuery,N=w.useSendMailMutation,A=n(2073),E=n(2074),D=n(2081),T=n(55),J=n.n(T),M=n(2092),z=function(){var e=C(),t=e.data,n=e.isLoading,a=(e.isError,e.isSuccess);return Object(m.jsx)(J.a,{autoHide:!0,style:{height:"100%"},children:Object(m.jsxs)("div",{className:"template",children:[Object(m.jsxs)(A.a,{align:"middle",justify:"center",className:"header",children:[Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(A.a,{align:"middle",justify:"center",children:Object(m.jsx)(E.a,{children:Object(m.jsx)("span",{className:"title",children:"Dnde"})})})}),Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(A.a,{align:"middle",justify:"center",children:Object(m.jsx)(E.a,{style:{textAlign:"center"},children:Object(m.jsxs)("span",{className:"subtitle",children:["Drag and Drop Editor tailored for ",Object(m.jsx)("b",{children:"Mails"})]})})})}),Object(m.jsx)(E.a,{style:{paddingTop:"24px"},span:24,children:Object(m.jsx)(A.a,{align:"middle",justify:"center",children:Object(m.jsxs)(E.a,{className:"info",md:24,lg:10,style:{textAlign:"center"},children:[Object(m.jsx)("span",{children:"All features are optimised for mails, work flexibly through import/export, with responsive design for all devices."}),Object(m.jsx)("br",{}),Object(m.jsx)("a",{target:"_blank",href:"https://github.com/aghontpi/dnde",children:Object(m.jsxs)("span",{children:["Check it on Github ",Object(m.jsx)(M.a,{style:{position:"relative",top:"4px",fontSize:"32px"}})]})})]})})})]}),Object(m.jsxs)(A.a,{className:"choose-template",align:"middle",gutter:[0,8],justify:"center",children:[Object(m.jsx)(E.a,{span:16,children:Object(m.jsx)("span",{className:"title",children:"Choose a template and get started."})}),Object(m.jsx)(E.a,{span:16,children:Object(m.jsx)("span",{className:"subtitle",children:"All templates are redesigned in dnde, using original mail as reference."})})]}),Object(m.jsxs)(A.a,{justify:"center",className:"template-list",gutter:[0,40],children:[Object(m.jsx)(E.a,{lg:6,children:Object(m.jsx)(v,{})}),n&&[1,2].map((function(e,t){return Object(m.jsx)(E.a,{xs:24,md:12,lg:6,style:{textAlign:"center"},children:Object(m.jsx)(O,{id:"8x93dummy",skeleton:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(D.a,{active:!0}),Object(m.jsx)(D.a,{active:!0})]})},t)})})),a&&t?t.response.map((function(e,t){return Object(m.jsx)(E.a,{lg:6,children:Object(m.jsx)(O,{id:e.docRef,image:e.preview},t)})})):null]})]})})},P=n(11),_=n(2076),I=n(304),L=n(2077),R=n(2078),B=n(2084),q=n(2083),H=function(e){I.b.success(e)},F=function(){var e;(e=console).log.apply(e,arguments)},U=function(){var e;(e=console).error.apply(e,arguments)},W=function(){var e;(e=console).info.apply(e,arguments)},V=n(289),Y=n(290),X=n(12),G=n.n(X),K=function(){function e(){Object(V.a)(this,e),this.undo=void 0,this.redo=void 0,this.undo=[],this.redo=[]}return Object(Y.a)(e,[{key:"newAction",value:function(e){this.undo.length>0&&G.a.isEqual(e,this.peekUndo())?F("undoredo: prev action and new action are same, not performing action"):(this.undo.push(this.copy(e)),this.redo=[],this.storeToLocalStorage())}},{key:"undoAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.undo.length<1)return!1;var t=this.copy(this.undo.pop());return this.redo.push(t),e&&G.a.isEqual(t,e)?(F("undoredo: undo action but view and current are same, proceeding one more step"),this.undoAction(e)):t}},{key:"redoAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.redo.length<1)return!1;var t=this.copy(this.redo.pop());return this.undo.push(t),e&&G.a.isEqual(t,e)?(F("undoredo: redo action but view and current are same, proceeding one more step"),this.redoAction(e)):t}},{key:"peekUndo",value:function(){var e=!1;return this.undo.length>0&&(e=this.copy(this.undo[this.undo.length-1])),e}},{key:"peekRedo",value:function(){var e=!1;return this.redo.length>0&&(e=this.redo[this.redo.length-1]),e}},{key:"isUndoEmpty",value:function(){return 0===this.undo.length}},{key:"isRedoEmpty",value:function(){return 0===this.redo.length}},{key:"reset",value:function(){this.undo=[],this.redo=[]}},{key:"print",value:function(){F("undoredo: ",this.undo,this.redo)}},{key:"storeToLocalStorage",value:function(){try{localStorage.setItem("actions",JSON.stringify(this.undo[this.undo.length-1]))}catch(e){F("undoredo: error storing to local storage"),F("undoredo: it is possible this occured due to storage limit in localStorage,truncating undo")}}},{key:"copy",value:function(e){return G.a.cloneDeep(e)}}]),e}(),Q=new K;window.UNDOREO=Q;var Z,$,ee=n(13),te=n(105),ne=Object(r.createContext)(null),ae=[{tagName:"mj-title",content:"dnde-editor"},{tagName:"mj-style",content:"a{text-decoration:none!important}\n\n.body {} "},{tagName:"mj-attributes",children:[{tagName:"mj-text",attributes:{"font-family":"Ubuntu"}}]}].concat(Object(te.a)([{name:"Roboto",value:"https://fonts.googleapis.com/css2?family=Roboto&display=swap"},{name:"Festive",value:"https://fonts.googleapis.com/css2?family=Festive&display=swap"},{name:"Noto Sans Mono",value:"https://fonts.googleapis.com/css2?family=Noto+Sans+Mono&display=swap"},{name:"Open Sans",value:"https://fonts.googleapis.com/css2?family=Open+Sans&display=swap"},{name:"Andada Pro",value:"https://fonts.googleapis.com/css2?family=Andada+Pro&display=swap"},{name:"Lato",value:"https://fonts.googleapis.com/css2?family=Lato&display=swap"},{name:"Scheherazade New",value:"https://fonts.googleapis.com/css2?family=Scheherazade+New&display=swap"},{name:"Montserrat",value:"https://fonts.googleapis.com/css2?family=Montserrat&display=swap"},{name:"Roboto Condensed",value:"https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap"},{name:"Source Sans Pro",value:"https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap"},{name:"Poppins",value:"https://fonts.googleapis.com/css2?family=Poppins&display=swap"},{name:"Oswald",value:"https://fonts.googleapis.com/css2?family=Oswald&display=swap"},{name:"Noto sans",value:"https://fonts.googleapis.com/css2?family=Noto+sans&display=swap"},{name:"Georama",value:"https://fonts.googleapis.com/css2?family=Georama&display=swap"},{name:"Roboto Mono",value:"https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap"},{name:"Raleway",value:"https://fonts.googleapis.com/css2?family=Raleway&display=swap"},{name:"Nunito",value:"https://fonts.googleapis.com/css2?family=Nunito&display=swap"},{name:"Roboto Slab",value:"https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap"},{name:"PT Sans",value:"https://fonts.googleapis.com/css2?family=PT+Sans&display=swap"},{name:"Merriweather",value:"https://fonts.googleapis.com/css2?family=Merriweather&display=swap"},{name:"Playfair Display",value:"https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap"},{name:"Lora",value:"https://fonts.googleapis.com/css2?family=Lora&display=swap"},{name:"Rubix",value:"https://fonts.googleapis.com/css2?family=Rubix&display=swap"},{name:"IM Fell English SC",value:"https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap"},{name:"Open Sans Condensed",value:"https://fonts.googleapis.com/css2?family=Open+Sans+Condensed&display=swap"},{name:"Inter",value:"https://fonts.googleapis.com/css2?family=Inter&display=swap"},{name:"Nunito Sans",value:"https://fonts.googleapis.com/css2?family=Nunito+Sans&display=swap"},{name:"Work Sans",value:"https://fonts.googleapis.com/css2?family=Work+Sans&display=swap"},{name:"Quicksand",value:"https://fonts.googleapis.com/css2?family=Quicksand&display=swap"},{name:"Fira Sans",value:"https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap"},{name:"Ubuntu",value:"https://fonts.googleapis.com/css2?family=Ubuntu&display=swap"}].map((function(e){return{tagName:"mj-font",attributes:{name:e.name,href:e.value}}})))),re={tagName:"mjml",children:[{tagName:"mj-head",attributes:{},children:Object(te.a)(ae)},{tagName:"mj-body",attributes:{"css-class":"mjml-tag body identifier-mj-body","background-color":"grey",width:"600px"},children:[],mutableProperties:["width","background-color"]}],attributes:{}},ie=function(e){var t=Object(r.useState)(G.a.cloneDeep(re)),n=Object(P.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)({}),c=Object(P.a)(o,2),s=c[0],l=c[1];return Object(m.jsx)(ne.Provider,{value:{mjmlJson:a,setMjmlJson:i,attributes:s,setAttributes:l},children:e.children})},oe=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(void 0===t)return null;var r=t;if(r.attributes&&r.attributes["css-class"]){var i=r.attributes["css-class"];if(i.includes(n))return[r,a]}if(r.children)for(var o=0;o<r.children.length;o++){var c=r.children[o],s=e(c,n,a+".children[".concat(o,"]"));if(s)return s}return null},ce=function(e){var t=e.closest(".mjml-tag"),n=null;return t?((n=se(t,t.classList))||W("unable to find identifier"),n):(W("unable to find closest"),n)},se=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"identifier-mj",a=null,r=0;t&&r<t.length;r++){var i=t[r];if(i.includes(n)){a=i;break}}return a},le=function(e){return se(null,e.split(" "))},de=function e(t,n){if(t){for(var a=0;t.children&&a<t.children.length;a++)t.children[a]=e(t.children[a],n);var r=t.attributes;if(r){var i=r["css-class"];i=function(e,t){var n="";if("string"!==typeof e)return F("classNames should be string while generating uniqueIdentifier, but found ".concat(typeof e," instead")),null;for(var a=e.split(" "),r=0;r<a.length;r++){var i=a[r];if(i.includes("identifier-mj")){var o=(i=i.trim()).match(/-(\d+)/),c=i;i=o?i.replace(o[0],"-".concat(t)):" ".concat(i,"-").concat(t),F("generating-tag: ".concat(c," -> ").concat(i," "))}n+=" ".concat(i)}return n}(i,n()),r["css-class"]=i}return t.attributes=r,t}},ue=function(e,t){for(var n=0;t&&e&&e.length>0&&n<e.length;n++){var a=e[n];if(a&&a.attributes&&a.attributes["css-class"].includes(t))return n}return-1},be=Object(r.createContext)(null),pe=Object(r.memo)((function(e){var t=Object(r.useState)(),n=Object(P.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(),c=Object(P.a)(o,2),s=c[0],l=c[1],d=Object(r.useRef)(1),u=Object(r.useState)(1),b=Object(P.a)(u,2),p=b[0],j=b[1];return Object(m.jsxs)(be.Provider,{value:{activeHover:a,setActiveHover:i,active:s,setActive:l,id:p,setId:j,getId:function(){j(p+1),F("getId",p)}},children:[Object(m.jsx)("div",{children:Object(m.jsxs)(m.Fragment,{children:[F("uiContextRerendering",d.current++)," "]})}),e.children]})})),je=function(){return Object(r.useContext)(be)},fe=function(){return Object(r.useContext)(ne)},he=n(134),ge=n.n(he),me=n(67),xe=n.n(me),ve=n(291),Oe=Object(r.createContext)(null),ye=function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=Object(r.useState)(!1),i=Object(P.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)(0),l=Object(P.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(0),p=Object(P.a)(b,2),j=p[0],f=p[1],h=Object(r.useState)(!1),g=Object(P.a)(h,2),x=g[0],v=g[1],O=Object(r.useState)(0),y=Object(P.a)(O,2),k=y[0],w=y[1],C=Object(r.useState)(0),S=Object(P.a)(C,2),N=S[0],A=S[1],E=Object(r.useState)(!1),D=Object(P.a)(E,2),T=D[0],J=D[1],M=Object(r.useState)(0),z=Object(P.a)(M,2),_=z[0],I=z[1],L=Object(r.useState)(0),R=Object(P.a)(L,2),B=R[0],q=R[1],H=Object(r.useState)(!1),F=Object(P.a)(H,2),U=F[0],W=F[1];return Object(m.jsx)(Oe.Provider,{value:{ref:t,isActive:o,setActive:c,x:d,y:j,setX:u,setY:f,delX:k,delY:N,setDelX:w,setDelY:A,drag:{isColumn:U,setIsColumn:W},copy:{copyActive:T,setCopyActive:J,copyX:_,setCopyX:I,copyY:B,setCopyY:q},delActive:x,setDelActive:v,ckeditorInstance:n},children:e.children})},ke=function(){return Object(r.useContext)(Oe)},we=Object(r.createContext)({position:{x:0,y:0,setX:function(){},setY:function(){}},status:{active:!1,setActive:function(){}}}),Ce=function(e){var t=Object(r.useState)(0),n=Object(P.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(0),c=Object(P.a)(o,2),s=c[0],l=c[1],d=Object(r.useState)(!1),u=Object(P.a)(d,2),b=u[0],p=u[1];return Object(m.jsx)(we.Provider,{value:{position:{x:a,y:s,setX:i,setY:l},status:{active:b,setActive:p}},children:e.children})},Se=function(){return Object(r.useContext)(we).position},Ne=function(){return Object(r.useContext)(we).status},Ae=function(e,t){return Ee(e,t)&&e.children&&e.children<1},Ee=function(e,t){if(!t)return!1;if("body"===t)t="identifier-mj-body";else if("section"===t)t="identifier-mj-section";else{if("column"!==t)return!1;t="identifier-mj-column"}return e.props&&e.props.className&&"string"===typeof e.props.className&&e.props.className.includes(t)},De=function e(t,n){if(!t)return null;var a=t.closest(".mjml-tag");if(a&&a.classList){var r=se(a,a.classList);if(r&&r.includes(n))return[a,r];a=a.parentElement}return e(a,n)},Te=function(e){return De(e,"mj-section")},Je=function(e,t){var n=t.getBoundingClientRect(),a=e.clientX,r=e.clientY,i=n&&a&&r&&!0;return(a<n.left||a>n.right)&&(i=!1),(r<n.top||r>n.bottom)&&(i=!1),i},Me=function(e,t){if(e&&e.dataTransfer){e.dataTransfer.effectAllowed="move";var n=e.target;e.dataTransfer.setDragImage(n,-5,-5),e.dataTransfer.setData("config",JSON.stringify(t))}},ze=[{tagName:"mj-image",attributes:{src:"https://dev.bluepie.in/assets/87583817874843.svg","css-class":"mj-placeholder",width:"120px"}},{tagName:"mj-text",attributes:{"padding-top":"0px","font-size":"16px",align:"center","css-class":"mj-placeholder"},content:"drag and drop a content block here!"}],Pe={tagName:"mj-column",attributes:{"css-class":"mjml-tag identifier-mj-column",padding:"0px 0px"},children:[].concat(ze),mutableProperties:["background-color","inner-background-color","border","border-bottom","border-left","border-right","border-top","border-radius","inner-border","inner-border-bottom","inner-border-left","inner-border-right","inner-border-top","inner-border-radius","width","vertical-align","padding","padding-top","padding-bottom","padding-left","padding-right","css-class"]},_e={tagName:"mj-section",attributes:Object(ee.a)(Object(ee.a)({},{align:"center","background-color":"#414141",border:"none","border-radius":"3px",color:"#ffffff","font-family":"Ubuntu, Helvetica, Arial, sans-serif","font-size":"13px","font-weight":"normal","inner-padding":"10px 25px","line-height":"120%",padding:"10px 25px",target:"_blank","text-align":"none","text-decoration":"none","text-transform":"none","vertical-align":"middle"}),{},{"css-class":"mjml-tag identifier-mj-section","border-radius":"0px","background-color":"#fff","text-align":"center"}),children:[],cannot_have:["mj-section","mj-column"],mutableProperties:["background-color","background-position","background-position-x","background-position-y","background-repeat","background-size","background-url","border","border-bottom","border-left","border-radius","border-right","border-top","css-class","direction","full-width","padding","padding-bottom","padding-left","padding-right","padding-top","text-align"]},Ie=(Object(f.a)(A.a)(Z||(Z=Object(p.a)(["\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  p {\n    text-align: inherit;\n    color: rgb(85, 85, 85);\n    font-size: 14px;\n    font-weight: 600;\n  }\n"]))),Object(f.a)(A.a)($||($=Object(p.a)(["\n  background-color: rgb(252, 252, 252);\n  border: 1px solid rgb(229, 229, 229);\n  border-radius: 3px;\n  box-sizing: border-box;\n  display: flex;\n  box-shadow: none;\n  cursor: grab;\n\n  &:hover {\n    background-color: rgb(255, 255, 255);\n    box-shadow: rgb(0 0 0 / 20%) 0px 1px 4px;\n    border-color: rgb(255, 255, 255);\n  }\n\n  .wrapper {\n    margin: 10px;\n    background-color: rgb(255, 255, 255);\n    position: relative;\n    width: 100%;\n    display: flex;\n    border-radius: 3px;\n    box-sizing: border-box;\n\n    .border {\n      border: 1px solid rgb(85, 85, 85);\n      border-radius: 3px;\n      display: flex;\n      -webkit-box-align: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n    }\n  }\n"]))),{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,a,r,i,o,c,s="",l=0;for(e=Ie._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,o=(15&n)<<2|(a=e.charCodeAt(l++))>>6,c=63&a,isNaN(n)?o=c=64:isNaN(a)&&(c=64),s=s+this._keyStr.charAt(r)+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(c);return s},decode:function(e){var t,n,a,r,i,o,c="",s=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s<e.length;)t=this._keyStr.indexOf(e.charAt(s++))<<2|(r=this._keyStr.indexOf(e.charAt(s++)))>>4,n=(15&r)<<4|(i=this._keyStr.indexOf(e.charAt(s++)))>>2,a=(3&i)<<6|(o=this._keyStr.indexOf(e.charAt(s++))),c+=String.fromCharCode(t),64!=i&&(c+=String.fromCharCode(n)),64!=o&&(c+=String.fromCharCode(a));return c=Ie._utf8_decode(c)},_utf8_encode:function(e){var t="";e=e.replace(/\r\n/g,"\n");for(var n=0;n<e.length;n++){var a=e.charCodeAt(n);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){var t,n,a,r="",i=0;for(t=n=0;i<e.length;)(t=e.charCodeAt(i))<128?(r+=String.fromCharCode(t),i++):t>191&&t<224?(n=e.charCodeAt(i+1),r+=String.fromCharCode((31&t)<<6|63&n),i+=2):(n=e.charCodeAt(i+1),a=e.charCodeAt(i+2),r+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&a),i+=3);return r}}),Le=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return null;if(t.attributes&&t.attributes["css-class"]){var a=t.attributes["css-class"];if(a.includes("placeitem-placeholder"))return null}for(var r=n&&t.attributes&&t.attributes["css-class"]&&t.attributes["css-class"].includes(n),i=[],o=0;t.children&&o<t.children.length;o++){var c=t.children[o],s=r?c:e(c,n);s&&i.push(s)}return t&&"mj-column"===t.tagName&&0===i.length&&i.push.apply(i,Object(te.a)(ze)),i.length&&(t.children=i),t},Re=function e(t){if(t){if(t.attributes&&t.attributes["css-class"]){var n=t.attributes["css-class"];n=n.split(" ");for(var a=[],r=0;r<n.length;r++){var i=n[r];i.includes("identifier-mj")||i.includes("mj-placeholder")||i.includes("placeitem-placeholder")||a.push(i)}a.length&&(n=a.join(" "))}t.content&&(t.content=Ie.encode(t.content));for(var o=[],c=0;t.children&&c<t.children.length;c++){var s=t.children[c],l=e(s);l&&o.push(l)}return o.length&&(t.children=o),t}};function Be(e){if(e){e.content&&(e.content=Ie.decode(e.content));for(var t=[],n=0;e.children&&n<e.children.length;n++){var a=Be(e.children[n]);a&&t.push(a)}return t.length&&(e.children=t),e}}var qe,He,Fe,Ue,We,Ve,Ye,Xe=function(e){var t=e.mjmlJson,n=e.setMjmlJson,a=e.columnElement,r=e.event,i=e.currentTarget,o=e.nearestTag;if(a&&o){var c=i.closest(".".concat(o));if(c&&a&&Je(r,a)){var s=function(e,t){var n=t.getBoundingClientRect(),a=e.clientY;if(Je(e,t)){var r=Object(X.floor)((n.bottom-n.top)/2)+n.top;if(a<r)return"top";if(a>r)return"bottom"}return!1}(r,c);if(s){var l=oe(G.a.cloneDeep(t),o);if(l){for(var d=Object(P.a)(l,2)[1],u=d.slice(1,d.lastIndexOf(".children")),b=G.a.get(G.a.cloneDeep(t),u),p=[],j=0;b&&b.children&&j<b.children.length;j++){var f=b.children[j];F(f);var h=f.attributes&&f.attributes["css-class"];h&&h.includes("placeitem-placeholder")||(h&&h.includes(o)?"top"===s?p.push(Ge,f):"bottom"===s&&p.push(f,Ge):p.push(f))}if(b&&p.length>0){b.children=p;var g=G.a.set(G.a.cloneDeep(t),u,b),m=se(a,a.classList,"identifier-mj-column");if(m){var x=Le(g,m);G.a.isEqual(t,x)?F("::update:: -> but elements are the same, not triggering rerender"):(F("::update::",t,x),n(Object(ee.a)({},x)))}else G.a.isEqual(t,g)?F("::update:: -> but elements are the same, not triggering rerender"):(F("::update::",t,g),n(Object(ee.a)({},g)))}}}}}},Ge={tagName:"mj-text",attributes:{align:"center","css-class":"placeitem-placeholder"},content:'<div style="padding:24px">  </div>'},Ke=function(e){var t="content",n=e.match(/identifier-mj-(.*)/);return n&&((t=n[1]).includes("social-element")&&(t=t.replace("social-element","icon")),t.includes("-")&&(t=t.split("-")[0])),t},Qe=n(2090),Ze=n(2099),$e=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"up",r=le(e);if(r){var i=oe(t,r),o=oe(t,"identifier-mj-body");if(i&&o){for(var c=Object(P.a)(o,2),s=c[0],l=c[1],d=Object(P.a)(i,1),u=d[0],b=[],p=-1,j=0;s.children.length>1&&j<s.children.length;j++){var f=s.children[j];if(f&&f.attributes&&f.attributes["css-class"].includes(r)){p=j;break}}if(-1!==p)for(var h=0;s.children.length>1&&h<s.children.length;h++){var g=s.children[h];if(g&&"up"===a){if(h===p-1){b.push(u),b.push(g),h+=1;continue}b.push(g)}if(g&&"down"===a){if(h===p){var m=s.children[h+1];b.push(m),b.push(u),h+=1;continue}b.push(g)}}if(b.length>1){var x=G.a.cloneDeep(s);x.children=G.a.cloneDeep(b);var v=G.a.set(t,l.slice(1),x);Q.newAction(v),n(Object(ee.a)({},v))}}}},et=n(2082),tt=n(297),nt=n(2093),at=n(2094),rt=n(2095),it=n(2096),ot=n(2097),ct=n(2098),st=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(e&&(e.preventDefault(),e.stopPropagation()),F("editor action:",t,n),t){case"bold":document.execCommand("bold");break;case"underline":document.execCommand("underline");break;case"italics":document.execCommand("italic");break;case"size":document.execCommand("fontSize",!1,n);break;case"color":document.execCommand("backColor",!1,n);break;case"fontColor":document.execCommand("foreColor",!1,n);break;case"fontFamily":document.execCommand("fontName",!1,n);break;default:W("unhandled action ".concat(t))}return!1},lt=n(92),dt=function(e){var t=e.handleChange,n=e.mouseDown,a=Object(r.useState)((function(){return"#ccc"})),i=Object(P.a)(a,2),o=i[0],c=i[1];return Object(m.jsx)(bt,{onMouseDown:function(e){n||(e.preventDefault(),e.stopPropagation())},color:o,children:Object(m.jsx)("div",{className:"popover",children:Object(m.jsx)(lt.a,{disableAlpha:!1,color:o,onChange:function(e){return function(e){var n="".concat(e.hex).concat(ut(e.rgb.a));c(n),t("rgba(".concat(e.rgb.r,",").concat(e.rgb.g,",").concat(e.rgb.b,",").concat(e.rgb.a,")"))}(e)}})})})},ut=function(e){return 0===e?"00":Math.round(255*e).toString(16)},bt=f.a.div(qe||(qe=Object(p.a)(["\n  display: inline-block;\n  .ant-popover-inner-content {\n    padding: 0;\n  }\n"]))),pt=function(e){var t=e.activePath,n=e.label,a=e.overrideAttribute||"background-color",i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=Object(r.useState)((function(){return!1})),l=Object(P.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)((function(){return"#ccc"})),p=Object(P.a)(b,2),j=p[0],f=p[1],h=Ct({attribute:a,customPath:t}),g=Object(P.a)(h,2),x=g[0],v=g[1];Object(r.useEffect)((function(){if(x&&v){var e=G.a.get(o,v);e&&e.attributes&&e.attributes[a]&&f(e.attributes[a])}F("background reloading,",v,x)}),[v,x]);return x?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{flex:"auto",children:Object(m.jsx)(R.a.Item,{label:n||"Background"})}),Object(m.jsxs)(ft,{color:j,flex:"none",children:[Object(m.jsx)("div",{className:"swatch",onClick:function(){return u(!0)},children:Object(m.jsx)("div",{className:"color"})}),d?Object(m.jsxs)("div",{className:"popover",children:[Object(m.jsx)("div",{className:"cover",onClick:function(){return u(!1)}}),Object(m.jsx)(lt.a,{disableAlpha:!1,color:j,onChange:function(e){return function(e){var t="".concat(e.hex).concat(jt(e.rgb.a));if(f(t),v&&x){var n=G.a.get(o,v);n.attributes[a]=t;var r=G.a.set(o,v,n);c(Object(ee.a)({},r))}}(e)}})]}):null]})]})}):null},jt=function(e){return 0===e?"00":Math.round(255*e).toString(16)},ft=Object(f.a)(E.a)(He||(He=Object(p.a)(["\n  .color {\n    width: 25px;\n    height: 25px;\n    border-radius: 2px;\n    background: ",";\n  }\n  .swatch {\n    padding: 5px;\n    background: #fff;\n    border-radius: 1px;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n    display: inline-block;\n    cursor: pointer;\n  }\n\n  .popover {\n    position: absolute;\n    z-index: 2;\n    top: -108px;\n    left: -200px;\n  }\n\n  .cover {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n    bottom: 0px;\n    left: 0px;\n  }\n"])),(function(e){return e.color})),ht="width",gt=function(e){var t=e.activePath,n=Ct({attribute:ht,customPath:t}),a=Object(P.a)(n,2),i=a[0],o=a[1],c=fe(),s=c.mjmlJson,l=c.setMjmlJson,d=Object(r.useState)(""),u=Object(P.a)(d,2),b=u[0],p=u[1],j=St({path:o,visible:i,attribute:ht}).getValue;Object(r.useEffect)((function(){i&&p(j())}),[i]);return i?Object(m.jsx)(R.a.Item,{label:"Width",children:Object(m.jsx)(B.a,{onChange:function(e){if(p(e.target.value),""!==e.target.value&&"%"!==e.target.value||(e.target.value="0"),i&&o&&e.target.value){var t,n=G.a.get(s,o);n.attributes.width=e.target.value,t=G.a.set(s,o,n),l(Object(ee.a)({},t))}},value:b,onKeyDown:function(e){1===e.currentTarget.value.length&&"Backspace"===e.key&&(e.currentTarget.value="")}})}):null},mt="height",xt=function(){var e=Ct({attribute:mt}),t=Object(P.a)(e,2),n=t[0],a=t[1],i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=St({path:a,visible:n,attribute:mt}).getValue,l=Object(r.useState)(""),d=Object(P.a)(l,2),u=d[0],b=d[1];Object(r.useEffect)((function(){n&&b(s())}),[n]);return n?Object(m.jsx)(R.a.Item,{label:"Height",children:Object(m.jsx)(B.a,{onChange:function(e){if(b(e.target.value),""!==e.target.value&&"%"!==e.target.value||(e.target.value=""),n&&a&&e.target.value){var t,r=G.a.get(o,a);r.attributes.height=e.target.value,t=G.a.set(o,a,r),c(Object(ee.a)({},t))}},value:u,onKeyDown:function(e){1===e.currentTarget.value.length&&"Backspace"===e.key&&(e.currentTarget.value="")}})}):null},vt=function(e){var t=e.itemIndex,n=Object(r.useState)(),a=Object(P.a)(n,2),i=a[0],o=a[1],c=fe(),s=c.mjmlJson,l=c.setMjmlJson;Object(r.useEffect)((function(){if(-1!==t){var e=s.children[0].children[t];e&&e.content&&o(e.content)}}),[t]);return Object(m.jsx)(R.a.Item,{children:Object(m.jsx)(A.a,{children:Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a,{addonBefore:"title",value:i,onBlur:function(e){if(e&&-1!==t){var n=G.a.cloneDeep(s.children[0].children[t]);if(n){n.content=e.target.value;var a=G.a.set(s,"children[0].children[".concat(t,"]"),n);l(Object(ee.a)({},a))}}},onChange:function(e){-1!==t&&o(e.target.value)}})})})})},Ot="children[1]",yt=f.a.div(Fe||(Fe=Object(p.a)(["\n  padding: 16px 0px;\n  .title {\n    font-size: 14px;\n    font-weight: 600;\n  }\n  .props-container {\n    padding: 16px;\n  }\n"]))),kt=function(){var e=fe().mjmlJson,t=Object(r.useState)(-1),n=Object(P.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){if(e&&e.children&&e.children.length>0){var t=e.children[0];if(t&&t.tagName&&t.tagName.includes("head")&&t.children&&t.children.length>0)for(var n=t.children,a=0;a<n.length;a++){var r=n[a];r&&r.tagName&&r.tagName.includes("title")&&i(a)}}}),[]),Object(m.jsxs)(yt,{onMouseDown:function(t){Q.newAction(e)},onBlur:function(t){Q.newAction(e)},children:[Object(m.jsx)(wt,{title:"Body Properties"}),Object(m.jsxs)("div",{className:"props-container",children:[Object(m.jsx)(vt,{itemIndex:a}),Object(m.jsx)(gt,{activePath:Ot}),Object(m.jsx)(pt,{activePath:Ot,label:"Body Background:"})]})]})},wt=function(e){var t=e.title;return Object(m.jsx)(A.a,{justify:"center",children:Object(m.jsx)(E.a,{span:24,style:{textAlign:"center"},children:Object(m.jsx)("span",{className:"title",children:t})})})},Ct=function(e){var t=e.attribute,n=e.property,a=e.customPath,i=Object(r.useState)(!1),o=Object(P.a)(i,2),c=o[0],s=o[1],l=je().active,d=Object(r.useState)(""),u=Object(P.a)(d,2),b=u[0],p=u[1],j=fe().mjmlJson;return Object(r.useEffect)((function(){if(j&&a&&a===Ot)return s(!0),void p(Ot);if(l){var e=se(l,l.classList);if(e){var r=oe(j,e);if(a&&(r=[null,"."+a]),r){var i=r,o=Object(P.a)(i,2)[1];if(o.length>0&&p(o.slice(1)),t){var c=G.a.get(j,o.slice(1));if(c&&c.mutableProperties&&c.mutableProperties.includes(t))return void s(!0)}else if(n){var d=G.a.get(j,o.slice(1));if(d&&d[n])return void s(!0)}}}}s(!1),p("")}),[l]),[c,b,l]},St=function(e){var t=e.path,n=e.visible,a=e.attribute,r=fe().mjmlJson;return{getValue:function(){var e="";if(t&&n){var i=G.a.get(r,t);i&&i.attributes&&(e=i.attributes[a])}return e}}},Nt="font-family",At=function(){var e=Ct({attribute:Nt}),t=Object(P.a)(e,2),n=t[0],a=t[1],i=St({path:a,visible:n,attribute:Nt}).getValue,o=fe(),c=o.mjmlJson,s=o.setMjmlJson,l=Object(r.useState)(""),d=Object(P.a)(l,2),u=d[0],b=d[1],p=Object(r.useState)([]),j=Object(P.a)(p,2),f=j[0],h=j[1];return Object(r.useEffect)((function(){Et(c,f,h,s)}),[]),Object(r.useEffect)((function(){Et(c,f,h,s)}),[c]),Object(r.useEffect)((function(){if(n&&c){var e=i();if(e&&e.indexOf(",")){var t=e.split(",")[0];b(t)}}}),[c]),[f,u]},Et=function(e,t,n,a){if(e){var r=e.children[0];if(r&&r.children){var i=r.children.filter((function(e){return e&&e.tagName&&e.tagName.includes("font")}));if(t&&i&&i.length!==t.length){var o=i.map((function(e){return e.attributes.name.trim()})).sort((function(e,t){return e>t?1:-1}));n(o=G.a.uniq(o));var c=e.children[0].children[2],s="Ubuntu,"+o.join(",");if(c&&c.tagName.includes("attributes")&&c.children&&c.children[0]&&c.children[0].tagName.includes("text")&&c.children[0].attributes["font-family"]!==s){c.children[0].attributes["font-family"]=s;var l=G.a.set(e,"children[0].children[2]",c);l&&a(Object(ee.a)({},l))}}}}},Dt=n(86),Tt=n.n(Dt),Jt="href",Mt=function(){var e=Ct({attribute:Jt}),t=Object(P.a)(e,2),n=t[0],a=t[1],i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=St({path:a,visible:n,attribute:Jt}).getValue,l=Object(r.useState)(""),d=Object(P.a)(l,2),u=d[0],b=d[1];Object(r.useEffect)((function(){n&&b(s())}),[n,a]);var p=function(e){var t,n=G.a.get(o,a);n.attributes.href=e,t=G.a.set(o,a,n),c(Object(ee.a)({},t))};return n?Object(m.jsx)(Tt.a,{children:Object(m.jsx)(A.a,{children:Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a,{addonBefore:Jt,onBlur:function(e){if(e&&e.target&&e.target.value){var t=zt(e.target.value);p(t),b(t)}},onChange:function(e){b(e.target.value),a&&n&&p(e.target.value)},value:u})})})}):null},zt=function(e){return!(e=e.trim())||e.includes("https://")||e.includes("http://")||(e="https://".concat(e)),e},Pt=function(){var e=window.getSelection();if(e){var t=Ue;null===e||void 0===e||e.removeAllRanges(),null===e||void 0===e||e.addRange(Ue),Ue=t}},_t=function(){var e=Object(r.useRef)(null),t=Se(),n=t.x,a=t.y,i=Ne().active,o=je().active,c=fe(),s=c.mjmlJson,l=c.setMjmlJson,d=At(),u=Object(P.a)(d,1)[0];return Object(r.useEffect)((function(){if(e.current){var t=document.querySelectorAll("#customtoolbar .ant-select-selector");if(t)return t.forEach((function(e){F("attaching click event listener to container"),e.addEventListener("click",Rt)})),function(){return t.forEach((function(e){F("removing click event listener to container"),e.removeEventListener("click",Rt)}))}}}),[e]),Object(r.useEffect)((function(){if(i&&o){var e=se(o,o.classList);if(null===e||void 0===e?void 0:e.includes("mj-text")){var t=o.children[0].children[0],n=function(e){Lt(t,s,l)},a=function(){var e;Ue=null===(e=window.getSelection())||void 0===e?void 0:e.getRangeAt(0)};return t.addEventListener("focusout",n,!0),t.addEventListener("keyup",a,!1),t.addEventListener("click",a,!1),t.classList.add("editor-active"),t.setAttribute("contentEditable","true"),t.setAttribute("spellcheck","false"),function(){F("custom editor: cleaning up dynamic attributes"),t.removeEventListener("focusout",n,!0),t.removeEventListener("keyup",a,!1),t.removeEventListener("click",a,!1)}}}}),[o,s]),Object(m.jsxs)("div",{style:{display:i?"block":"none",position:"fixed",top:"".concat(a,"px"),left:"".concat(n,"px"),padding:"4px 8px",border:"1px solid black",zIndex:999,backgroundColor:"#fff",transition:"all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1)"},id:"customtoolbar",ref:e,onMouseDown:Rt,children:[Object(m.jsx)(et.a,{size:"small",dropdownStyle:{minWidth:"18px"},defaultValue:2,style:{fontSize:"12px"},onChange:function(e){st(null,"size",e)},children:Array.from(Array(7).keys()).map((function(e){return Object(m.jsx)(et.a.Option,{onMouseDown:Rt,onFocus:Rt,style:{fontSize:"12px"},value:e+1,children:Object(m.jsx)("span",{onMouseDown:Rt,onFocus:Rt,children:e+1})})}))}),Object(m.jsx)(et.a,{size:"small",defaultValue:"Ubuntu",dropdownStyle:{minWidth:"140px"},style:{fontSize:"12px"},onChange:function(e){st(null,"fontFamily",e)},onMouseDown:Rt,children:u.map((function(e){return Object(m.jsx)(et.a.Option,{onMouseDown:Rt,onFocus:Rt,style:{fontSize:"12px"},value:e,children:Object(m.jsx)("span",{onMouseDown:Rt,onFocus:Rt,children:e})})}))}),Object(m.jsx)(tt.a,{overlayClassName:"inline-editor-popover-color-picker",trigger:"click",placement:"bottom",content:Object(m.jsx)(dt,{handleChange:function(e){st(null,"fontColor",e)},mouseDown:!1}),destroyTooltipOnHide:!0,children:Object(m.jsx)(j.a,{icon:Object(m.jsx)(nt.a,{}),style:{fontSize:"12px"},size:"small"})}),Object(m.jsx)(tt.a,{overlayClassName:"inline-editor-popover-color-picker",trigger:"click",placement:"bottom",content:Object(m.jsx)(dt,{handleChange:function(e){st(null,"color",e)},mouseDown:!1}),destroyTooltipOnHide:!0,children:Object(m.jsx)(j.a,{icon:Object(m.jsx)(at.a,{}),style:{fontSize:"12px"},size:"small"})}),Object(m.jsx)(j.a,{icon:Object(m.jsx)(rt.a,{}),onClick:function(e){return st(e,"bold")},style:{fontSize:"12px"},size:"small"}),Object(m.jsx)(j.a,{icon:Object(m.jsx)(it.a,{}),onClick:function(e){return st(e,"italics")},style:{fontSize:"12px"},size:"small"}),Object(m.jsx)(j.a,{icon:Object(m.jsx)(ot.a,{}),onClick:function(e){return st(e,"underline")},style:{fontSize:"12px"},size:"small"}),Object(m.jsx)(It,{setLinkCallback:function(e){return st(e,"link")}})]})},It=function(e){e.setLinkCallback;var t=Object(r.useState)(!1),n=Object(P.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(""),c=Object(P.a)(o,2),s=c[0],l=c[1],d=Object(r.useRef)(null);return Object(m.jsx)(tt.a,{visible:a,content:Object(m.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[Object(m.jsx)(B.a,{className:"inline-editor-link",ref:d,value:s,onMouseDown:function(e){Pt()},onChange:function(e){l(e.target.value)},placeholder:"link"}),Object(m.jsx)(j.a,{type:"default",onMouseDown:Rt,onClick:function(){i(!1),Pt(),document.execCommand("insertHTML",!1,'<a href="'+zt(s)+'" target="_blank">'+document.getSelection()+"</a>")},children:"create"})]}),trigger:"click",placement:"bottom",children:Object(m.jsx)(j.a,{style:{fontSize:"12px"},onClick:function(e){Rt(e),i(!a),l("")},size:"small",icon:Object(m.jsx)(ct.a,{})})})},Lt=function(e,t,n){F("custom Inline Editor: updating state callback");var a=ce(e);if(a){var r=a;if(null===r||void 0===r?void 0:r.includes("mj-text")){var i=oe(t,r);if(i){var o=Object(P.a)(i,2)[1],c=G.a.get(t,o.slice(1));if(c){var s=G.a.cloneDeep(c);F("inline editor: updating",e);var l=e.innerHTML;s.content=l;var d=G.a.set(t,o.slice(1),s);n(Object(ee.a)({},d))}}}}},Rt=function(e){if(F("::reset",e.target),!(e.target&&"INPUT"===e.target.tagName&&e.target.className&&e.target.className.includes("inline-editor-link")))return F("::reset->reset behaviour",e.target),e.preventDefault(),e.stopPropagation(),!1;F("::reset, returning")},Bt=function(e){var t=e.className,n=e.idRef,a=e.active,i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=Object(r.useState)(!0),l=Object(P.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(!0),p=Object(P.a)(b,2),f=p[0],h=p[1];Object(r.useEffect)((function(){if(n.current===a){var e=le(t);if(e){var r=oe(o,le(t)),i=oe(o,"identifier-mj-body");if(r&&i){var c=Object(P.a)(i,1)[0];Object(P.a)(r,1)[0];if(c&&c.children&&1===c.children.length)return u(!1),void h(!1);if(c&&c.children&&c.children.length>1)for(var s=c.children.length-1,l=0;l<c.children.length;l++){var d=c.children[l];if(d&&d.attributes&&d.attributes["css-class"]&&d.attributes["css-class"].includes(e)){if(l===s){h(!1),u(!0);break}if(0===l){u(!1),h(!0);break}}}}}}}),[o,n,a]);return Object(m.jsx)("div",{onMouseDown:Rt,style:{display:a===n.current?"block":"none"},children:Object(m.jsxs)("div",{style:{zIndex:200,position:"absolute",left:-38,bottom:0,display:"flex",flexDirection:"column",rowGap:"4px"},children:[Object(m.jsx)(j.a,{type:"primary",disabled:!d,onClick:function(e){Rt(e),$e(t,o,c)},icon:Object(m.jsx)(Qe.a,{style:{fontSize:"20px"}})}),Object(m.jsx)(j.a,{type:"primary",disabled:!f,onClick:function(e){Rt(e),function(e,t,n){$e(e,t,n,"down")}(t,o,c)},icon:Object(m.jsx)(Ze.a,{style:{fontSize:"20px"}})})]})})},qt=Object(r.memo)((function(e){var t=e.uniqueKey,n=e.originalNode,a=je(),i=a.setActive,o=a.setActiveHover,c=a.active,s=a.activeHover,l=a.id,d=(a.setId,a.getId),u=ke(),b=u.setDelActive,p=u.setDelX,j=u.setDelY,f=u.copy,h=u.drag.isColumn,g=fe(),x=g.mjmlJson,v=g.setMjmlJson,O=Se(),y=O.setX,k=O.setY,w=Ne().setActive,C=Object(r.useRef)(l),S=Object(r.useRef)(l),N=f.setCopyX,A=f.setCopyActive,E=f.setCopyY;Object(r.useEffect)((function(){d()}),[]),Object(r.useEffect)((function(){null===c&&(A(!1),b(!1),w(!1))}),[c]);var D=Object(r.useMemo)((function(){return C.current===s?function(e){e&&e.target&&"A"===e.target.tagName&&e.preventDefault(),i(C.current);var t=e.target.closest(".mjml-tag");if(t){var n=t.getBoundingClientRect(),a=se(t,t.classList);if(null===a||void 0===a?void 0:a.includes("body"))return b(!1),void A(!1);if(null===a||void 0===a?void 0:a.includes("text")){var r=n.left,o=n.top-38;w(!0),y(r),k(o)}else w(!1);b(!0),A(!0),function(e){var t=e.pos,n=e.delete,a=n.setDelX,r=n.setDelY,i=e.copy,o=i.setCopyX,c=i.setCopyY;if(t){a(t.right+4);var s=Object(X.floor)((t.bottom-t.top)/2)-32;r(t.top+s),o(t.right+4),c(t.top+s+32+4)}}({pos:n,delete:{setDelX:p,setDelY:j},copy:{setCopyX:N,setCopyY:E}})}}:null}),[C,s]),T=s===C.current&&!C.current.className.includes("section"),J=(Object(r.useMemo)((function(){return s===C.current?"pointer":"default"}),[s,C]),s===C.current?"2px dashed rgb(121, 202, 182)":"unset"),M=c===C.current?"2px solid rgb(121, 202, 182)":"unset";Ae(n,"body")&&W("empty body detected"),Ae(n,"section")&&W("empty section detected");var z=Object(r.useCallback)((function(e){return De(e,"mj-column")}),[]),_=Ke(n.props.className),I=Object(r.createElement)("div",{style:{position:"absolute",right:-2,bottom:-24,zIndex:100,display:"social-element"!==_?"block":"none",minWidth:64,textAlign:"right"},draggable:!1},s===C.current||c===C.current?Object(r.createElement)("span",{style:{padding:"4px 6px",background:"#1890ff",color:"white",fontSize:"14px"}},Ke(n.props.className)):null),L=null;n&&n.props.className.includes("mj-section")&&(L=Object(m.jsx)(Bt,{className:n.props.className,idRef:C,active:c}));var R=Object(r.createElement)(n.nodeName,Object(ee.a)(Object(ee.a)({},n.props),{},{onDragOver:G.a.debounce((function(e){if(!h){var t=e.nativeEvent.target,n=ce(t);if(((null===n||void 0===n?void 0:n.includes("mj-column"))||(null===n||void 0===n?void 0:n.includes("mj-section")))&&(F("::indicator: trigger->column"),n.includes("mj-column"))){var a=function(e){var t=e.mjmlJson,n=e.setMjmlJson,a=e.nearestTag;if(a){var r=oe(t,a);if(r){var i=Le(G.a.cloneDeep(t));F("::beforechange::",t,i);for(var o=Object(P.a)(r,2)[1],c=G.a.get(G.a.cloneDeep(i),o.slice(1)),s=[],l=0;c&&c.children&&l<c.children.length;l++){var d=c.children[l],u=d.attributes&&d.attributes["css-class"];u&&u.includes("placeitem-placeholder")||u&&u.includes("mj-placeholder")||s.push(d)}if(s.length>0)return!1;s.push(Ge);var b=o.slice(1,o.lastIndexOf(".children"));if(c){c.children=s;for(var p=G.a.get(G.a.cloneDeep(i),b),j=[],f=0;p&&p.children&&f<p.children.length;f++){var h=p.children[f],g=h.attributes&&h.attributes["css-class"];le(g)!==a?j.push(h):j.push(c)}p.children=j;var m=G.a.set(i,b,p);return G.a.isEqual(t,m)?F("::update:: -> but elements are the same, not triggering rerender"):(F("::update::",i,m),n(Object(ee.a)({},m))),!0}}}}({mjmlJson:x,nearestTag:n,setMjmlJson:v});if(!0===a)return void F("::indicator: trigger->column -> stopping further processing");F("::indicator: trigger->column -> no updates where done -> proceeding further processing")}var r=z(t);if(r){var i=r;r=Object(P.a)(i,1)[0]}F("::indicator: trigger->insideColumn"),Xe({mjmlJson:x,nearestTag:n,columnElement:r,currentTarget:t,setMjmlJson:v,event:e})}}),150),onMouseOver:function(e){e.stopPropagation(),s!==C.current&&o(C.current)},onDragStart:function(e){c&&i(null),e.dataTransfer.dropEffect="move";var t=ce(e.target),n=oe(x,t);if(n){var a=Object(P.a)(n,2)[1],r=G.a.get(x,a.slice(1));r={mode:"move",uniqueClassName:t,config:G.a.cloneDeep(r)};var o=e.target;e.dataTransfer.setDragImage(o,0,0),e.dataTransfer.setData("config",JSON.stringify(r))}else W("move items: drag unable to find the config to transfer ".concat(t))},draggable:T,ref:C,id:S.current,onClick:D,key:t,style:Object(ee.a)(Object(ee.a)({},n.props.style),{},{cursor:"pointer",outline:c===C.current?M:J,position:"relative"})}),n.children?[].concat(Object(te.a)(n.children),[I,L]):null);return R})),Ht={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",align:"align",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vertical-align":"vertial-align","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Ft=function(e){var t=e.nodeName,n=e.props,a=e.children,i=e.id;return Object(r.createElement)(t,Object(ee.a)(Object(ee.a)({},n),{},{key:i,style:Object(ee.a)(Object(ee.a)({},n.style),{},{outline:"2px dashed rgb(121,202,182)"})}),a)},Ut=new DOMParser,Wt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(void 0!==t){var a=t.nodeName.toLowerCase();if("script"===a||"style"===a||"meta"===a||"link"===a||"title"===a||"br"===a){if("meta"===a){var o=t;return i.a.createElement(a,{httpEquiv:o.httpEquiv,content:o.content,key:a+n++},null)}if("link"===a){var c=t,s=null;return c.type&&(s=c.type),i.a.createElement(a,{href:c.href,rel:c.rel,type:s,key:a+n++},null)}return"br"===a?i.a.createElement(a,{key:a+n++},null):i.a.createElement(a,{dangerouslySetInnerHTML:{__html:t.innerHTML,key:a+n++}})}for(var l={},d=0;t.attributes&&d<t.attributes.length;d++){var u=t.attributes[d],b=Ht[u.name];if(void 0===b){b=Yt(u.name);"htmlParser: ".concat(u.name," is not found in possible attributes,\n      using ").concat(b," instead.")}var p="style"===u.name?Vt(u.value):u.value.trim();l[b]=p}l.key=n++;var j=[];if(t.className&&t.className.includes("mj-text")){var f={nodeName:a,props:Object(ee.a)({},l),children:[Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:t.innerHTML}})]};return Object(m.jsx)(qt,{uniqueKey:n++,originalNode:f})}for(var h=0;h<t.childNodes.length;h++){var g=t.childNodes[h];if("#text"!==g.nodeName)"#comment"!==g.nodeName&&"script"!==a&&"style"!==a&&j.push(e(g,n++));else if(g.textContent){var x=g.textContent.replaceAll("\n","").trim();x&&j.push(x)}}if(t.classList&&t.classList.contains("mjml-tag")){var v={nodeName:a,props:Object(ee.a)({},l),children:j};return Object(m.jsx)(qt,{uniqueKey:n++,originalNode:v})}return t.classList&&t.classList.contains("placeitem-placeholder")?Object(m.jsx)(Ft,{id:n++,nodeName:a,props:Object(ee.a)({},l),children:j}):("#document"===a&&(a="div"),"a"===a&&(delete l.href,delete l.target),"img"===a?i.a.createElement(a,Object(ee.a)({key:n++},l),null):3===t.nodeType?i.a.createElement(a,Object(ee.a)(Object(ee.a)({},l),{},{key:n++}),t.textContent):i.a.createElement(a,l,j))}},Vt=function(e){for(var t={},n=e.split(/;+(?![^(]*\))/g),a=0;a<n.length;a++)if(""!==n[a]){var r=n[a].split(":"),i=Object(ve.a)(r),o=[i[0],i.slice(1).join(":")],c=o[0].trim();c=Yt(c);var s=o[1].trim();t[c]=s}return t},Yt=function(e){return e.replace(/([-_][a-z])/gi,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},Xt=n(2075),Gt=function(e){return e&&e.children&&(e.children=e.children.filter((function(e){return!(e&&e.attributes&&e.attributes["css-class"])||!e.attributes["css-class"].includes("mj-placeholder")}))),e},Kt=function(e){var t,n=e.target,a=e.uniqueClassName,r=e.mjmlJson,i=e.setMjmlJson,o=e.setDelActive,c=e.setCopyActive,s=e.setActive,l=e.movement;if(n)t=ce(n);else{if(!a)return void W("operation remove: either target/uniqueClassName must be provided \n      to perform this operation\n    ");t=a}if(!t)return null;var d=oe(r,t);if(!d)return null;var u=Object(P.a)(d,2)[1].split("."),b=u.pop();u=u.join(".");var p=G.a.get(r,u.slice(1)),j=b.match(/\[(.*?)\]/);if(j){for(var f=parseInt(j[1]),h=[],g=0;p&&p.children&&g<p.children.length;g++)g!==f&&h.push(p.children[g]);if(u){var m=G.a.get(r,u.slice(1));m.tagName&&"mj-column"===m.tagName&&0===h.length&&(h=ze)}p.children=h}s(null);var x=G.a.set(r,u.slice(1),p);x?(o(!1),c(!1),i(Object(ee.a)({},x)),l||Q.newAction(x)):W("operation remove: unable to delete the item")},Qt=function(e){var t=e.mjmlJson,n=e.setActive,a=e.setMjmlJson,r=e.setCopyActive,i=e.setDelActive,o=e.target,c=e.uidGenerator,s=se(o,o.classList),l="",d=-1;if(s){var u=function(e,t,n){var a=-1,r=e.closest(".mjml-tag");for(r===e&&(r=e.parentElement);-1===a&&r;){var i=se(r,r.classList);if(i){var o=oe(t,i);if(o){var c=o;if(o=Object(P.a)(c,1)[0],-1!==(a=ue(o.children,n)))break}}var s=r.closest(".mjml-tag");s&&s===r?r.parentElement&&(r=r.parentElement.closest(".mjml-tag")):r=s}return[a,r&&r.classList?se(r,r.classList):null]}(o,t,s);if(!u||"number"!==typeof u[0]||"string"!==typeof u[1])return void I.b.error("Unable to copy element");var b=Object(P.a)(u,2);d=b[0],l=b[1]}var p=oe(t,s);if(p&&d>-1){var j=p;return p=Object(P.a)(j,1)[0],r(!1),i(!1),n(null),function(e){var t=e.droppedConfig,n=e.setMjmlJson,a=e.mjmlJson,r=e.uid,i=e.parentUniqueClassIdentifier,o=e.index,c=i;if(!c){var s=Le(a);return n(Object(ee.a)({},s)),null}var l=G.a.cloneDeep(t);l=de(l,r);var d=oe(a,c);if(!d)return null;var u=Object(P.a)(d,2),b=u[0],p=u[1];if(W("operation add: item in Object:",b,"path to Object:",p),b=Gt(b),o>-1)for(var j=0;b&&b.children&&j<b.children.length;j++)j===o&&b.children.splice(j,0,l);var f=G.a.set(a,p.slice(1),b);f=Le(f),Q.newAction(f),n(Object(ee.a)({},f))}({droppedConfig:G.a.cloneDeep(p),setMjmlJson:a,mjmlJson:t,uid:c,index:d,parentUniqueClassIdentifier:l})}},Zt=function e(t){if(3===t.nodeType)return t;for(var n=0;t.childNodes&&n<t.childNodes.length;n++){var a=e(t.childNodes[n]);if(a)return $t(a)}},$t=function e(t){if(!t)return null;if(3===t.nodeType)return e(t.parentNode);var n=t;return 1===n.nodeType?n.closest("div"):n},en=n(298),tn=n.n(en),nn=Object(r.createContext)(null),an=function(e){var t=Object(r.useState)(!1),n=Object(P.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(null),c=Object(P.a)(o,2),s=c[0],l=c[1],d=Object(r.useState)(0),u=Object(P.a)(d,2),b=u[0],p=u[1],j=Object(r.useState)(0),f=Object(P.a)(j,2),h=f[0],g=f[1];return Object(m.jsx)(nn.Provider,{value:{QuillActive:a,setQuillActive:i,quillEditor:s,setQuillEditor:l,quillX:b,quillY:h,setQuillX:p,setQuillY:g},children:e.children})},rn=function(){return Object(r.useContext)(nn)},on=n(211),cn=n.n(on),sn=n(210),ln=n.n(sn),dn={mutableAttributes:{},id:"",type:""},un=Object(r.createContext)(dn),bn=function(e){var t=Object(r.useRef)(1);return Object(m.jsx)(un.Provider,{value:{genId:function(){if(t.current&&"number"===typeof t.current)return++t.current}},children:e.children})},pn=function(){var e=Object(r.useContext)(un).genId;return{getId:function(){return e()}}},jn=function(){var e=ke(),t=(e.ref,e.isActive,e.x,e.y,e.delActive),n=e.delX,a=e.delY,i=e.setDelActive,o=e.copy,c=fe(),s=c.mjmlJson,l=c.setMjmlJson,d=je(),u=d.active,b=d.setActive,p=rn(),j=p.QuillActive,f=(p.quillX,p.quillY,p.setQuillEditor),h=(p.setQuillActive,rn().quillEditor),g=o.copyActive,x=o.setCopyActive,v=o.copyX,O=o.copyY,y=pn().getId;Object(r.useEffect)((function(){if(h){var e=se(u,u.classList);h.on("text-change",(function(){var t=h.container.firstChild.innerHTML;if(F(t),e){var n=oe(s,e);if(n){var a=Object(P.a)(n,2)[1],r=G.a.get(s,a.slice(1));r.content=t;var i=G.a.set(s,a.slice(1),r);l(Object(ee.a)({},i))}}}))}return function(){return h&&h.off("text-change")}}),[h]),Object(r.useEffect)((function(){if(u&&j){var e=Zt(u);if(h&&h.off("text-change"),e){for(;e.parentElement.classList.contains("ql-container")||e.hasAttribute("data-gramm");)e=e.parentElement;e.classList.contains("ql-container")&&(e.classList.remove("ql-container"),e.classList.remove("ql-snow"));var t=new tn.a(e,{theme:"snow",modules:{toolbar:"#toolbarContainer"}});t.getModule("toolbar").container.childNodes.forEach((function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}));var n=t.getModule("toolbar");n.container.childNodes.forEach((function(e){n.attach(e)}),n),f(t),t.editor.scroll.domNode.classList.remove("ql-editor"),t.container.children[1].remove(),t.container.children[1].remove(),t=void 0}}}),[u]);var k=Object(r.useMemo)((function(){return function(){u&&Kt({target:u,mjmlJson:s,setMjmlJson:l,setDelActive:i,setActive:b,setCopyActive:x})}}),[u]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(fn,{style:{zIndex:200,display:t?"block":"none",position:"fixed",left:"".concat(n,"px"),top:"".concat(a,"px")},deleteConfirm:k}),Object(m.jsx)(hn,{onClick:function(){u&&Qt({mjmlJson:s,setActive:b,setMjmlJson:l,setCopyActive:x,setDelActive:i,target:u,uidGenerator:y})},style:{zIndex:200,display:g?"block":"none",position:"fixed",left:"".concat(v,"px"),top:"".concat(O,"px")}})]})},fn=function(e){var t=e.style,n=e.deleteConfirm;return Object(m.jsx)(Xt.a,{placement:"right",title:"Are you sure ?",okText:"Delete",cancelText:"Cancel",onConfirm:n,children:Object(m.jsx)(j.a,{style:t,type:"primary",icon:Object(m.jsx)(ln.a,{})})})},hn=function(e){var t=e.style,n=e.onClick;return Object(m.jsx)(j.a,{style:t,onClick:n,type:"primary",icon:Object(m.jsx)(cn.a,{})})},gn=(n(514),n(515),n(2100)),mn=n(2091),xn=n(72),vn=function(e){var t=e.undoCallback,n=e.redoCallback;return Object(m.jsxs)("div",{style:{position:"fixed",padding:"8px",display:"flex",flexDirection:"column",rowGap:"4px",zIndex:200},children:[Object(m.jsx)(xn.a,{mouseEnterDelay:.5,color:"cyan",title:"undo",placement:"right",children:Object(m.jsx)(j.a,{disabled:Q.isUndoEmpty(),onClick:t,type:"default",size:"large",style:{background:"#fff"},icon:Object(m.jsx)(gn.a,{})})}),Object(m.jsx)(xn.a,{mouseEnterDelay:.5,color:"cyan",title:"redo",placement:"right",children:Object(m.jsx)(j.a,{disabled:Q.isRedoEmpty(),onClick:n,type:"default",style:{background:"#fff"},size:"large",icon:Object(m.jsx)(mn.a,{})})})]})},On=Object(f.a)("div")(We||(We=Object(p.a)(["\n  .editor-active {\n    :focus {\n      outline: none;\n    }\n  }\n"]))),yn=function(e){var t=fe(),n=t.mjmlJson,a=t.setMjmlJson,i=pn().getId,o=je(),c=o.setActive,s=o.active,l=ke(),d=l.setDelActive,u=l.copy,b=l.drag,p=b.setIsColumn,j=b.isColumn,f=u.setCopyActive;Object(r.useEffect)((function(){Q.print()}),[n]);var h=Object(r.useCallback)((function(e){s&&c(null),e.preventDefault()}),[c,s]);return Object(m.jsxs)(J.a,{style:{height:"100%"},children:[Object(m.jsx)(jn,{}),Object(m.jsx)(_t,{}),Object(m.jsx)(vn,{undoCallback:function(){var e=Q.undoAction(n);e&&(a(Object(ee.a)({},e)),c(null),d(!1),f(!1))},redoCallback:function(){var e=Q.redoAction(n);e&&(c(null),a(Object(ee.a)({},e)),d(!1),f(!1))}}),Object(m.jsx)(On,{className:"".concat(xe.a.viewHolder," mjml-wrapper mjml-tag identifier-mj-body"),onDrop:function(e){e.preventDefault(),j&&p(!1);var t=JSON.parse(e.dataTransfer.getData("config"));t&&t.mode&&"move"===t.mode&&t.config&&(Kt({uniqueClassName:t.uniqueClassName,mjmlJson:n,setMjmlJson:a,setActive:c,setDelActive:d,setCopyActive:f,movement:!0}),W("operation move: onDrop -> removed previous instance \n      of config :'".concat(t.uniqueClassName,"'")),t=t.config),function(e){var t=e.target,n=e.droppedConfig,a=e.setMjmlJson,r=e.mjmlJson,i=e.uid,o=ce(t);if(!o){var c=Le(r);return a(Object(ee.a)({},c)),null}if("mj-section"!==n.tagName&&("identifier-mj-body"===o||"identifier-mj-section"===o)){var s=Le(r);return a(Object(ee.a)({},s)),I.b.error("Use a section to place the item"),null}if(n.tagName&&"mj-section"===n.tagName&&"identifier-mj-body"!==o){var l="Sections can not be nested! it will break mobile design";return I.b.info(l),void F("operation add: ".concat(l))}var d=G.a.cloneDeep(n);d=de(d,i);var u=oe(G.a.cloneDeep(r),o);if(!u)return null;var b=Object(P.a)(u,2),p=b[0],j=b[1];W("operation add: item in Object:",p,"path to Object:",j),p=function(e,t){if("mj-body"!==e.tagName&&e.children&&e.children.length)for(var n=0;n<e.children.length;n++){var a=e.children[n],r=a.attributes["css-class"];r&&r.includes("placeitem-placeholder")?e.children[n]=t:e.children[n]=a}else e.children.push(t);return e}(p=Gt(p),d),Q.isUndoEmpty()&&Q.newAction(Le(G.a.cloneDeep(r)));var f=G.a.set(r,j.slice(1),p);f=Le(f),Q.newAction(f),a(Object(ee.a)({},f))}({target:e.nativeEvent.target,droppedConfig:t,mjmlJson:n,setMjmlJson:a,uid:i})},onDragOver:h,children:Object(m.jsx)(kn,{mjml:n,isColumn:j})})]})},kn=Object(r.memo)((function(e){var t=e.mjml;e.isColumn;return t&&function(e){if("string"!==typeof e)return U("htmlParser: html is not a string"),i.a.createElement("div",{},"errors: please check dev console");var t=Ut.parseFromString(e,"text/html");return null===t?(U("htmlParser: doc is null, unable to process html"),i.a.createElement("p",{},"errors: please check dev console")):Wt(t,1)}(ge()(t).html)})),wn=n(214),Cn=n.n(wn),Sn=n(212),Nn=n.n(Sn),An=n(215),En=n.n(An),Dn=n(213),Tn=n.n(Dn),Jn=[{title:"Left",prop:"left",component:Object(m.jsx)(Nn.a,{})},{title:"Justify",prop:"justify",component:Object(m.jsx)(Tn.a,{})},{title:"Center",prop:"center",component:Object(m.jsx)(Cn.a,{})},{title:"Right",prop:"right",component:Object(m.jsx)(En.a,{})}],Mn=function(){var e=Ct({attribute:"align"}),t=Object(P.a)(e,2),n=t[0],a=t[1],r=fe(),i=r.mjmlJson,o=r.setMjmlJson,c=je().active;return n?Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{flex:"3",children:Object(m.jsx)(R.a.Item,{label:"Align"})}),Object(m.jsx)(E.a,{flex:"2",children:Object(m.jsx)(A.a,{justify:"space-between",children:Jn.map((function(e,t){var r=e.prop,s=e.component,l=e.title;return Object(m.jsx)(E.a,{children:Object(m.jsx)(xn.a,{title:l,children:Object(m.jsx)(j.a,{onClick:function(){return function(e){if(c&&n&&a){var t=G.a.get(i,a);if(t&&t.attributes&&t.attributes){t.attributes.align=e;var r=G.a.set(i,a,t);o(Object(ee.a)({},r))}}}(r)},type:"ghost",icon:s})})},t)}))})})]}):null},zn=n(2080),Pn=n(2088),_n=[{label:"None",value:"none"},{label:"Solid",value:"solid"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"},{label:"Double",value:"double"},{label:"Groove",value:"groove"},{label:"Ridge",value:"ridge"},{label:"Inset",value:"inset"},{label:"Outset",value:"outset"},{label:"Hidden",value:"hidden"}];!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.All=4]="All"}(Ye||(Ye={}));var In,Ln=function(e){var t=e.color,n=e.setColor,a=e.showColor,r=e.setShowColor,i=e.borderDirection,o="0px";return o=i===Ye.Top||i===Ye.Left?"-40px":"-200px",Object(m.jsxs)(Qn,{left:o,color:t,children:[Object(m.jsx)("div",{className:"swatch",onClick:function(){return r(!0)},children:Object(m.jsx)("div",{className:"color"})}),a?Object(m.jsxs)("div",{className:"popover",children:[Object(m.jsx)("div",{className:"cover",onClick:function(){return r(!1)}}),Object(m.jsx)(lt.a,{disableAlpha:!1,color:t,onChange:function(e){return n(e.hex)}})]}):null]})};!function(e){e.Top="border-top",e.Bottom="border-bottom",e.Left="border-left",e.Right="border-right"}(In||(In={}));var Rn,Bn,qn,Hn,Fn,Un,Wn,Vn,Yn,Xn,Gn,Kn=function(e){var t=e.activePath,n=e.direction,a=fe(),i=a.mjmlJson,o=a.setMjmlJson,c=Ct({attribute:"border",customPath:t}),s=Object(P.a)(c,2),l=s[0],d=s[1],u=Object(r.useState)("none"),b=Object(P.a)(u,2),p=b[0],j=b[1],f=Object(r.useState)("#000"),h=Object(P.a)(f,2),g=h[0],x=h[1],v=Object(r.useState)(!1),O=Object(P.a)(v,2),y=O[0],k=O[1],w=Object(r.useState)("0"),C=Object(P.a)(w,2),S=C[0],N=C[1],D=Object(r.useState)("px"),T=Object(P.a)(D,2),J=T[0],M=T[1],z=St({path:d,visible:l,attribute:In.Left}),_=St({path:d,visible:l,attribute:In.Right}),I=St({path:d,visible:l,attribute:In.Top}),L=St({path:d,visible:l,attribute:In.Bottom}),R="0px none #000",q=function e(t){var n=t.split(" "),a=function(e){var t=[],n=e.match(/[0-9]/g),a=e.match(/[a-zA-Z]/g);return t.push(null===n?"":n.join("")),t.push(null===a?"":a.join("")),t}(n[0]);3===n.length&&2===a.length?(N(a[0]),M(a[1]),j(n[1]),x(n[2])):e(R)};return Object(r.useEffect)((function(){l&&d&&function(){var e=z.getValue(),t=_.getValue(),a=I.getValue(),r=L.getValue();if(e===t&&e===a&&e===r&&""!==e&&n===Ye.All)e&&q(e);else switch(n){case Ye.Left:q(void 0!==e?e:R);break;case Ye.Right:q(void 0!==t?t:R);break;case Ye.Top:q(void 0!==a?a:R);break;case Ye.Bottom:q(void 0!==r?r:R);break;case Ye.All:q(R)}}()}),[l,d]),Object(r.useEffect)((function(){!function(e){if(l&&d){var t,a=G.a.get(i,d);n!==Ye.Left&&n!==Ye.All||(a.attributes[In.Left]=e),n!==Ye.Right&&n!==Ye.All||(a.attributes[In.Right]=e),n!==Ye.Top&&n!==Ye.All||(a.attributes[In.Top]=e),n!==Ye.Bottom&&n!==Ye.All||(a.attributes[In.Bottom]=e),t=G.a.set(i,d,a),o(Object(ee.a)({},t))}}(S+J+" "+p+" "+g)}),[p,g,S,J]),l?Object(m.jsxs)(m.Fragment,{children:[n===Ye.All&&Object(m.jsxs)(A.a,{gutter:[8,4],justify:"space-between",children:[Object(m.jsx)(E.a,{span:12,children:Object(m.jsx)(et.a,{value:p,options:_n,onChange:function(e){return j(e)}})}),Object(m.jsx)(E.a,{flex:"none",children:Object(m.jsx)(B.a,{style:{width:"88px"},placeholder:"Width",value:S,onChange:function(e){return N(e.target.value)},addonAfter:J})}),Object(m.jsx)(E.a,{span:4,style:{display:"flex",justifyContent:"flex-end",paddingRight:"0px"},children:Object(m.jsx)(Ln,{color:g,borderDirection:n,setColor:x,showColor:y,setShowColor:k})})]}),n!==Ye.All&&Object(m.jsxs)(A.a,{gutter:[0,4],justify:"space-between",children:[Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(et.a,{value:p,options:_n,onChange:function(e){return j(e)}})}),Object(m.jsx)(E.a,{span:24,children:Object(m.jsxs)(A.a,{justify:"space-between",align:"middle",children:[Object(m.jsx)(E.a,{flex:"none",style:{width:"88px"},children:Object(m.jsx)(B.a,{placeholder:"Width",value:S,onChange:function(e){return N(e.target.value)},addonAfter:J})}),Object(m.jsx)(E.a,{flex:"none",children:Object(m.jsx)(Ln,{color:g,borderDirection:n,setColor:x,showColor:y,setShowColor:k})})]})})]})]}):null},Qn=Object(f.a)(E.a)(Ve||(Ve=Object(p.a)(["\n  display: flex;\n  .color {\n    width: 25px;\n    height: 25px;\n    border-radius: 2px;\n    background: ",";\n  }\n  .swatch {\n    padding: 3px;\n    background: #fff;\n    border-radius: 1px;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n    display: inline-block;\n    cursor: pointer;\n  }\n\n  .popover {\n    position: absolute;\n    z-index: 2;\n    top: -108px;\n    left: ",";\n  }\n\n  .cover {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n    bottom: 0px;\n    left: 0px;\n  }\n"])),(function(e){return e.color}),(function(e){return e.left})),Zn=function(e){var t=e.activePath,n=e.label,a=e.attribute_name||"border",i=Object(r.useState)(!1),o=Object(P.a)(i,2),c=o[0],s=o[1],l=Ct({attribute:a,customPath:t}),d=Object(P.a)(l,2),u=d[0];d[1];return u?Object(m.jsxs)(R.a.Item,{children:[Object(m.jsxs)(A.a,{justify:"space-between",children:[Object(m.jsx)(E.a,{flex:"none",children:Object(m.jsx)(zn.a.Text,{children:n||"Border Control :"})}),Object(m.jsxs)(E.a,{flex:"none",children:[Object(m.jsx)(zn.a.Text,{style:{paddingRight:"8px",fontSize:"12px"},children:"Advanced"}),Object(m.jsx)(Pn.a,{size:"small",checked:c,onChange:function(){return s(!c)}})]})]}),Object(m.jsxs)(A.a,{style:{paddingTop:"8px"},gutter:[24,16],children:[Object(m.jsxs)(E.a,{span:24,style:{display:c?"none":"block"},children:[Object(m.jsx)(zn.a.Text,{style:{fontSize:"12px"},children:"All Directions "}),Object(m.jsx)(Kn,{direction:Ye.All,activePath:t})]}),Object(m.jsxs)(E.a,{span:12,style:{display:c?"block":"none"},children:[Object(m.jsx)(zn.a.Text,{style:{fontSize:"12px"},children:"Top"}),Object(m.jsx)(Kn,{direction:Ye.Top,activePath:t})]}),Object(m.jsxs)(E.a,{span:12,style:{display:c?"block":"none"},children:[Object(m.jsx)(zn.a.Text,{style:{fontSize:"12px"},children:"Right"}),Object(m.jsx)(Kn,{direction:Ye.Right,activePath:t})]}),Object(m.jsxs)(E.a,{span:12,style:{display:c?"block":"none"},children:[Object(m.jsx)(zn.a.Text,{style:{fontSize:"12px"},children:"Left"}),Object(m.jsx)(Kn,{direction:Ye.Left,activePath:t})]}),Object(m.jsxs)(E.a,{span:12,style:{display:c?"block":"none"},children:[Object(m.jsx)(zn.a.Text,{style:{fontSize:"12px"},children:"Bottom"}),Object(m.jsx)(Kn,{direction:Ye.Bottom,activePath:t})]})]})]}):null},$n="border-radius",ea=function(e){var t=e.activePath,n=fe(),a=n.mjmlJson,r=n.setMjmlJson,i=Ct({attribute:$n,customPath:t}),o=Object(P.a)(i,2),c=o[0],s=o[1],l=function(e){if(s){""===e&&(e="none");var t=G.a.get(a,s);t.attributes["border-radius"]=e;var n=G.a.set(a,s,t);r(Object(ee.a)({},n))}},d="";return c&&(d=G.a.get(a,s+"attributes.border-radius")),c?Object(m.jsx)(R.a.Item,{label:"Border Radius",children:Object(m.jsx)(B.a,{onChange:function(e){c&&e.target.value&&(""===e.target.value&&(e.target.value="none"),l(e.currentTarget.value))},value:d,onKeyDown:function(e){if(1===e.currentTarget.value.length&&"Backspace"===e.key&&(e.currentTarget.value=""),("ArrowUp"===e.key||"ArrowDown"===e.key)&&(e.preventDefault(),c)){var t=G.a.get(a,s+"attributes")["border-radius"],n=new RegExp(/^\d+/).exec(t),r=n?parseInt(n[0]):0;"ArrowUp"===e.key?t=t.replace(/^\d+/,r+1):"ArrowDown"===e.key&&r>0&&(t=t.replace(/^\d+/,r-1)),e.currentTarget.value=t,l(t)}}})}):null},ta="container-background-color",na=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a=Object(r.useState)((function(){return!1})),i=Object(P.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)((function(){return"#ccc"})),l=Object(P.a)(s,2),d=l[0],u=l[1],b=je().active,p=Ct({attribute:ta}),j=Object(P.a)(p,2),f=j[0],h=j[1];Object(r.useEffect)((function(){if(b&&f)try{if(h){var e=G.a.get(t,h);e.mutableProperties.includes(ta)&&u(e.attributes["container-background-color"])}}catch(n){W("got exception, hiding background mod",n)}}),[b]);return f?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{flex:"auto",children:Object(m.jsx)(R.a.Item,{label:"Container Background"})}),Object(m.jsxs)(ra,{color:d,flex:"none",children:[Object(m.jsx)("div",{className:"swatch",onClick:function(){return c(!0)},children:Object(m.jsx)("div",{className:"color"})}),o?Object(m.jsxs)("div",{className:"popover",children:[Object(m.jsx)("div",{className:"cover",onClick:function(){return c(!1)}}),Object(m.jsx)(lt.a,{disableAlpha:!1,color:d,onChange:function(e){return function(e){var a="".concat(e.hex).concat(aa(e.rgb.a));if(u(a),h&&f){var r=G.a.get(t,h);r.attributes["container-background-color"]=a;var i=G.a.set(t,h,r);n(Object(ee.a)({},i))}}(e)}})]}):null]})]})}):null},aa=function(e){return 0===e?"00":Math.round(255*e).toString(16)},ra=Object(f.a)(E.a)(Rn||(Rn=Object(p.a)(["\n  .color {\n    width: 25px;\n    height: 25px;\n    border-radius: 2px;\n    background: ",";\n  }\n  .swatch {\n    padding: 5px;\n    background: #fff;\n    border-radius: 1px;\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n    display: inline-block;\n    cursor: pointer;\n  }\n\n  .popover {\n    position: absolute;\n    z-index: 2;\n    top: -108px;\n    left: -200px;\n  }\n\n  .cover {\n    position: fixed;\n    top: 0px;\n    right: 0px;\n    bottom: 0px;\n    left: 0px;\n  }\n"])),(function(e){return e.color})),ia="content",oa=function(){var e=Ct({property:ia}),t=Object(P.a)(e,2),n=t[0],a=t[1],i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=Object(r.useState)(""),l=Object(P.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(null),p=Object(P.a)(b,2),j=p[0],f=p[1],h=Object(r.useState)(!1),g=Object(P.a)(h,2),x=g[0],v=g[1];je().active;Object(r.useEffect)((function(){if(n&&a){var e=G.a.get(o,a);if(e){if(u(e.content?e.content:""),"mj-text"===e.tagName){if(e.attributes&&e.attributes["css-class"]&&e.attributes["css-class"].includes("html-block"))return f(!1),void v(!0);f(!0)}else f(!1);v(!1)}}}),[n,a]);var O=function(e){var t=e.currentTarget.value;if(u(t),a&&n){var r=G.a.get(o,a);if(r){if(x)if(""===e.currentTarget.value.replace(/\n/,"").trim()&&(u("<div></div>"),e.currentTarget.value="<div></dvi>"),Ut.parseFromString(t.replace(/\n/,""),"text/xml").querySelector("parsererror"))return void F("invalid html in content: not triggering rerender");if(r.content!==t){r.content=t;var i=G.a.set(o,a,r);c(Object(ee.a)({},i))}}}};return n?Object(m.jsx)(R.a.Item,{children:Object(m.jsxs)(A.a,{gutter:[0,8],children:[Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)("span",{className:"ant-form-item-label",children:"Content:"})}),Object(m.jsx)(E.a,{span:24,children:x?Object(m.jsx)(B.a.TextArea,{spellCheck:!1,rows:28,onChange:O,value:d}):Object(m.jsx)(B.a.TextArea,{disabled:j||!1,readOnly:j||!1,spellCheck:!1,rows:3,onChange:O,value:d})})]})}):null},ca="font-size",sa=function(){var e=Ct({attribute:ca}),t=Object(P.a)(e,2),n=t[0],a=t[1],r=fe(),i=r.mjmlJson,o=r.setMjmlJson,c=St({path:a,visible:n,attribute:ca}).getValue;return n?Object(m.jsx)(R.a.Item,{label:"FontSize",children:Object(m.jsx)(B.a,{onChange:function(e){var t=e.currentTarget.value;if(a&&n){var r,c=G.a.get(i,a);c.attributes["font-size"]=t,r=G.a.set(i,a,c),o(Object(ee.a)({},r))}},value:c()})}):null},la="src",da=function(){var e=Ct({attribute:la}),t=Object(P.a)(e,2),n=t[0],a=t[1],r=fe(),i=r.mjmlJson,o=r.setMjmlJson,c=St({path:a,visible:n,attribute:la}).getValue;return n?Object(m.jsx)(A.a,{children:Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a,{addonBefore:"src",onChange:function(e){return function(e){var t=e.currentTarget.value;if(a&&n){var r,c=G.a.get(i,a);c.attributes.src=t,r=G.a.set(i,a,c),o(Object(ee.a)({},r))}}(e)},value:c()})})}):null},ua="inner-padding",ba=function(){var e=Ct({attribute:ua}),t=Object(P.a)(e,2),n=t[0],a=t[1],i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=Object(r.useState)(),l=Object(P.a)(s,2),d=l[0],u=l[1];Object(r.useEffect)((function(){if(n&&a){var e=G.a.get(o,a);e&&e.attributes&&e.attributes["inner-padding"]&&u(e.attributes["inner-padding"])}}),[n,a]),Object(r.useEffect)((function(){d&&function(e){var t=e.visible,n=e.path,a=e.mjmlJson,r=e.setMjmlJson,i=e.attribute,o=e.value;if(t&&n){var c=G.a.get(a,n,t);if(c&&c.attributes&&c.attributes[i]!==o){c.attributes[i]=o;var s=G.a.set(a,n,c);r(Object(ee.a)({},s))}}}({visible:n,path:a,mjmlJson:o,setMjmlJson:c,value:d,attribute:ua})}),[d]);return n?Object(m.jsx)(R.a.Item,{label:"Inner Padding :",children:Object(m.jsx)(B.a,{onChange:function(e){var t=e.currentTarget.value;F("inner padding value",t),a&&n&&u(t)},type:"text",value:d})}):null},pa=function(e){var t=e.activePath,n=Ct({attribute:"padding",customPath:t}),a=Object(P.a)(n,3),i=a[0],o=a[1],c=a[2],s=fe(),l=s.mjmlJson,d=s.setMjmlJson,u=function(e,t){""===e.currentTarget.value&&(e.currentTarget.value="0"),b(t,e.currentTarget.value)},b=Object(r.useMemo)((function(){return function(e,t){if(o&&i){var n={};if(e){var a=G.a.get(l,o);a.attributes["padding-".concat(e)]=t,n=G.a.set(l,o,a),d(Object(ee.a)({},n))}}}}),[i,o]),p=function(e){var t="";if(o&&i&&c){var n=G.a.get(l,o);if(!n)return;if(!(t=n.attributes?n.attributes["padding-".concat(e)]:null)&&(t=n.attributes.padding)){var a=t.split(" "),r=Object(P.a)(a,2),s=r[0],d=r[1];switch(e){case"top":case"bottom":return s;case"left":case"right":return d}}}return t};return i?Object(m.jsxs)(R.a.Item,{label:"Padding :",children:[Object(m.jsx)(B.a.Group,{style:{marginBottom:"6px"},children:Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{span:11,offset:0,children:Object(m.jsx)(B.a,{addonBefore:"top",onChange:function(e){return u(e,"top")},value:p("top")})}),Object(m.jsx)(E.a,{span:11,offset:2,children:Object(m.jsx)(B.a,{addonBefore:"right",onChange:function(e){return u(e,"right")},value:p("right")})})]})}),Object(m.jsx)(B.a.Group,{children:Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{span:11,offset:0,children:Object(m.jsx)(B.a,{addonBefore:"bottom",onChange:function(e){return u(e,"bottom")},value:p("bottom")})}),Object(m.jsx)(E.a,{span:11,offset:2,children:Object(m.jsx)(B.a,{addonBefore:"left",onChange:function(e){return u(e,"left")},value:p("left")})})]})})]}):null},ja=n(2079),fa=n(2087),ha={display:"flex",height:"16px",borderRadius:"0px"},ga="1px solid rgb(85, 85, 85)",ma=function(){var e=je().active,t=fe(),n=t.mjmlJson,a=t.setMjmlJson,i=ke(),o=i.setDelActive,c=i.copy.setCopyActive,s=Ne().setActive,l=pn().getId,d=Object(r.useState)(!1),u=Object(P.a)(d,2),b=u[0],p=u[1],j=Object(r.useState)(),f=Object(P.a)(j,2),h=f[0],g=f[1];Object(r.useEffect)((function(){if(e){var t=Te(e);if(t){var n=Object(P.a)(t,2)[1];return p(!0),void g(n)}}p(!1)}),[e,b]);var x=function(e){if(b&&h){var t=oe(n,h);if(t){var r=Object(P.a)(t,2),i=r[0],d=r[1];if(i&&d&&i.children&&e.length>0){for(var u=i.children.length,p=e.length,j=[],f=0;f<u&&f<p;f++){var g=G.a.cloneDeep(i.children[f]);g&&g.attributes&&(g.attributes.width=e[f],j.push(g))}for(var m=u;m<p;m++){var x=de(G.a.cloneDeep(Pe),l);x.attributes.width=e[m],j.push(x)}var v=Object(ee.a)(Object(ee.a)({},i),{},{children:j});F("column layout: ",v);var O=G.a.set(n,d.slice(1),v);O&&(Q.newAction(O),o(!1),c(!1),s(!1),a(Object(ee.a)({},O)))}}}};return b?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)(va,{children:Object(m.jsx)("p",{children:"1 Columns"})}),Object(m.jsx)(xa,{click:function(){return x(["100%"])},one:100})]}),Object(m.jsxs)("div",{style:{marginTop:"16px"},children:[Object(m.jsx)(va,{children:Object(m.jsx)("p",{children:"2 Columns"})}),Object(m.jsx)(xa,{click:function(){return x(["50%","50%"])},one:50,two:50}),Object(m.jsx)(xa,{click:function(){return x(["39%","59%"])},one:40,two:60}),Object(m.jsx)(xa,{click:function(){return x(["25%","75%"])},one:25,two:75}),Object(m.jsx)(xa,{click:function(){return x(["60%","40%"])},one:60,two:40}),Object(m.jsx)(xa,{click:function(){return x(["75%","25%"])},one:75,two:25})]}),Object(m.jsxs)("div",{style:{marginTop:"16px"},children:[Object(m.jsx)(va,{children:Object(m.jsx)("p",{children:"3 Columns"})}),Object(m.jsx)(xa,{click:function(){return x(["33%","33%","33%"])},one:50,two:50,three:50}),Object(m.jsx)(xa,{click:function(){return x(["47.5%","5%","47.5%"])},one:47.5,two:5,three:47.5}),Object(m.jsx)(xa,{click:function(){return x(["25%","25%","50%"])},one:25,two:25,three:50}),Object(m.jsx)(xa,{click:function(){return x(["25%","50%","25%"])},one:25,two:50,three:25}),Object(m.jsx)(xa,{click:function(){return x(["50%","25%","25%"])},one:50,two:25,three:25})]}),Object(m.jsxs)("div",{style:{marginTop:"16px"},children:[Object(m.jsx)(va,{children:Object(m.jsx)("p",{children:"4 Columns"})}),Object(m.jsx)(xa,{click:function(){return x(["25%","25%","25%","25%"])},one:50,two:50,three:50,four:50})]})]}):Object(m.jsx)("div",{style:{textAlign:"center"},children:"Select an item inside the body"})},xa=function(e){var t=e.click,n=e.one,a=e.two,r=e.three,i=e.four;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(A.a,{style:{marginBottom:"12px"}}),Object(m.jsx)(Oa,{onClick:t||void 0,children:Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsxs)("div",{className:"border",children:[Object(m.jsx)("div",{style:Object(ee.a)(Object(ee.a)({},ha),{},{flexGrow:n,borderRight:a?ga:"unset"})}),a?Object(m.jsx)("div",{style:Object(ee.a)(Object(ee.a)({},ha),{},{flexGrow:a,borderRight:r?ga:"unset"})}):null,r?Object(m.jsx)("div",{style:Object(ee.a)(Object(ee.a)({},ha),{},{flexGrow:r,borderRight:i?ga:"unset"})}):null,i?Object(m.jsx)("div",{style:Object(ee.a)(Object(ee.a)({},ha),{},{flexGrow:a})}):null]})})})]})},va=Object(f.a)(A.a)(Bn||(Bn=Object(p.a)(["\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  p {\n    margin: 0px;\n    text-align: inherit;\n    color: rgb(85, 85, 85);\n    font-size: 14px;\n    font-weight: 600;\n  }\n"]))),Oa=Object(f.a)(A.a)(qn||(qn=Object(p.a)(["\n  background-color: rgb(252, 252, 252);\n  border: 1px solid rgb(229, 229, 229);\n  border-radius: 3px;\n  box-sizing: border-box;\n  display: flex;\n  box-shadow: none;\n  cursor: grab;\n\n  &:hover {\n    background-color: rgb(255, 255, 255);\n    box-shadow: rgb(0 0 0 / 20%) 0px 1px 4px;\n    border-color: rgb(255, 255, 255);\n  }\n\n  .wrapper {\n    margin: 10px;\n    background-color: rgb(255, 255, 255);\n    position: relative;\n    width: 100%;\n    display: flex;\n    border-radius: 3px;\n    box-sizing: border-box;\n\n    .border {\n      border: 1px solid rgb(85, 85, 85);\n      border-radius: 3px;\n      display: flex;\n      -webkit-box-align: center;\n      align-items: center;\n      width: 100%;\n      height: 100%;\n      box-sizing: border-box;\n    }\n  }\n"]))),ya="font-family",ka=et.a.Option,wa=function(){var e=Ct({attribute:ya}),t=Object(P.a)(e,2),n=t[0],a=t[1],r=fe(),i=r.mjmlJson,o=r.setMjmlJson,c=St({path:a,visible:n,attribute:ya}).getValue,s=At(),l=Object(P.a)(s,2),d=l[0],u=l[1],b="";return n&&a&&(b=c())&&b.indexOf(",")>-1&&(b=b.split(",")[0]),n?Object(m.jsx)(R.a.Item,{label:"Font Family",children:Object(m.jsx)(et.a,{value:u,onChange:function(e){if(n&&a){var t=G.a.get(i,a);if(t){t.attributes["font-family"]=e;var r=G.a.set(i,a,t);r&&o(Object(ee.a)({},r))}}},children:d.map((function(e){return Object(m.jsx)(ka,{value:e,children:e},e)}))})}):null},Ca=n(179),Sa="vertical-align",Na=function(e){var t=e.activePath,n=Ct({attribute:Sa,customPath:t}),a=Object(P.a)(n,2),r=a[0],i=a[1],o=fe(),c=o.mjmlJson,s=o.setMjmlJson,l=je().active,d=function(e){if(l&&r&&i){var t=G.a.get(c,i);if(t&&t.attributes){t.attributes["vertical-align"]=e;var n=G.a.set(c,i,t);s(Object(ee.a)({},n))}}};return r?Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{flex:"auto",children:Object(m.jsx)(R.a.Item,{label:"Vertical Align"})}),Object(m.jsx)(E.a,{children:Object(m.jsxs)(A.a,{justify:"space-between",gutter:[16,0],children:[Object(m.jsx)(xn.a,{title:"Top",children:Object(m.jsx)(j.a,{onClick:function(){return d("top")},type:"ghost",icon:Object(m.jsx)(Ca.VerticalAlignTopOutlined,{})})}),Object(m.jsx)(E.a,{children:Object(m.jsx)(xn.a,{placement:"left",title:"Middle :Note: all columns in section must be set to middle, for this to work.",children:Object(m.jsx)(j.a,{onClick:function(){return d("middle")},type:"ghost",icon:Object(m.jsx)(Ca.VerticalAlignMiddleOutlined,{})})})}),Object(m.jsx)(E.a,{children:Object(m.jsx)(xn.a,{title:"Bottom",children:Object(m.jsx)(j.a,{onClick:function(){return d("bottom")},type:"ghost",icon:Object(m.jsx)(Ca.VerticalAlignBottomOutlined,{})})})})]})})]}):null},Aa="background-url",Ea="background-size",Da="background-repeat",Ta=function(){var e=Object(r.useState)(""),t=Object(P.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),o=Object(P.a)(i,2),c=o[0],s=o[1],l=Object(r.useState)(""),d=Object(P.a)(l,2),u=d[0],b=d[1],p=fe(),j=p.mjmlJson,f=p.setMjmlJson,h=Ct({attribute:Aa}),g=Object(P.a)(h,2),x=g[0],v=g[1],O=Ct({attribute:Ea}),y=Object(P.a)(O,2),k=y[0],w=y[1],C=Ct({attribute:Da}),S=Object(P.a)(C,2),N=S[0],D=S[1];if(Object(r.useEffect)((function(){if(j){if(x){var e=G.a.get(j,v);e&&a(e.attributes[Aa])}if(k){var t=G.a.get(j,w);t&&s(t.attributes[Ea])}if(N){var n=G.a.get(j,D);n&&b(n.attributes[Da])}}}),[x,k,N]),!1===x&&!1===k&&!1===N)return null;return Object(m.jsx)(R.a.Item,{label:"Background Image:",children:Object(m.jsx)(B.a.Group,{children:Object(m.jsxs)(A.a,{gutter:[0,4],children:[x?Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a,{addonBefore:"url",onChange:function(e){if(a(e.target.value),x&&v&&e.target.value){var t=G.a.get(j,v);if(t&&t.attributes){t.attributes[Aa]=e.target.value;var n=G.a.set(j,v,t);f(Object(ee.a)({},n))}}},value:n})}):null,k?Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a,{addonBefore:"size",onChange:function(e){if(s(e.target.value),k&&w&&e.target.value){var t=G.a.get(j,v);if(t&&t.attributes){t.attributes[Ea]=e.target.value;var n=G.a.set(j,w,t);f(Object(ee.a)({},n))}}},value:c,placeholder:"px/percent/'cover'/'contain'"})}):null,N?Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a,{addonBefore:"repeat",onChange:function(e){if(b(e.target.value),N&&D&&e.target.value){var t=G.a.get(j,v);if(t&&t.attributes){t.attributes[Da]=e.target.value;var n=G.a.set(j,D,t);f(Object(ee.a)({},n))}}},value:u,placeholder:"repeat"})}):null]})})})},Ja=ja.a.TabPane,Ma=Object(f.a)(ja.a)(Hn||(Hn=Object(p.a)(["\n  .ant-tabs-tab {\n    padding-top: 0px;\n  }\n  .ant-tabs-content {\n    height: 100%;\n  }\n\n  .mods {\n    padding: 24px 16px;\n    padding-top: 4px;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .ant-row {\n    margin-bottom: 8px;\n  }\n"]))),za=function(){var e=fe().mjmlJson,t=je().active,n=Object(r.useState)([]),a=Object(P.a)(n,2),i=a[0],o=a[1];return Object(r.useEffect)((function(){if(t){var n=Te(t);if(n){var a=Object(P.a)(n,2)[1],r=oe(e,a);if(r){var c=Object(P.a)(r,2),s=c[0],l=c[1];if(l=l.slice(1),s&&s.children&&s.children.length>0){for(var d=[],u=0;u<s.children.length;u++)"mj-column"===s.children[u].tagName&&d.push("".concat(l,".children[").concat(u,"]"));return void(G.a.isEqual(i,d)||o(d))}}}}o([])}),[t]),t&&i.length>0?Object(m.jsx)(Ma,{centered:!0,tabBarGutter:2,defaultActiveKey:"0",style:{height:"100%"},destroyInactiveTabPane:!1,children:i&&i.map((function(t,n){return Object(m.jsx)(Ja,{tab:"column ".concat(n+1),children:Object(m.jsx)(J.a,{style:{height:"100%"},autoHide:!0,children:Object(m.jsxs)("div",{className:"mods",onMouseDown:function(t){Q.newAction(e)},onBlur:function(t){Q.newAction(e)},children:[Object(m.jsx)(gt,{activePath:t}),Object(m.jsx)(Na,{activePath:t}),Object(m.jsx)(pa,{activePath:t}),Object(m.jsx)(pt,{activePath:t}),Object(m.jsx)(pt,{label:"Inner Background:",overrideAttribute:"inner-background-color",activePath:t}),Object(m.jsx)(Zn,{activePath:t}),Object(m.jsx)(ea,{activePath:t})]})})},n)}))}):Object(m.jsx)("div",{style:{textAlign:"center",marginTop:"24px"},children:"Select an item inside the body"})},Pa="line-height",_a=function(){var e=Ct({attribute:Pa}),t=Object(P.a)(e,2),n=t[0],a=t[1],i=fe(),o=i.mjmlJson,c=i.setMjmlJson,s=Object(r.useState)("100%"),l=Object(P.a)(s,2),d=l[0],u=l[1],b=St({path:a,visible:n,attribute:Pa}).getValue;Object(r.useEffect)((function(){if(n&&a){var e=b();u(e)}}),[n,a]);return n?Object(m.jsx)(Tt.a,{children:Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{flex:"auto",children:"Line Height:"}),Object(m.jsx)(E.a,{flex:"none",children:Object(m.jsx)(Ia,{onChange:function(e){u(e.target.value),n&&a&&e&&e.target&&("number"===typeof e.target.value&&e.target.value<0&&(e.target.value=0),Ra(e.target.value.toString(),a,o,c))},addonBefore:Object(m.jsx)("span",{onClick:function(){La(n,d,o,a,u,c,"dec")},children:"-"}),addonAfter:Object(m.jsx)("span",{onClick:function(){La(n,d,o,a,u,c,"inc")},children:"+"}),value:d,style:{width:"".concat(d?d.toString().length+12:12,"ch ")}})})]})}):null},Ia=Object(f.a)(B.a)(Fn||(Fn=Object(p.a)(["\n  .ant-input-group-addon {\n    cursor: pointer;\n    user-select: none;\n    padding:0px;\n    &:hover {\n      color: #40a9ff;\n    }\n    span{\n        padding 0 11px;\n    }\n  }\n"]))),La=function(e,t,n,a,r,i,o){if(e&&t){var c,s=t,l=t;s.includes("%")?(c="inc"===o?10:-10,s=s.split("%")[0],s=parseInt(s)):(c="inc"===o?1:-1,s=parseInt(s));var d=s,u=Math.max(s+c,0),b=l.replace(d.toString(),u.toString());r(b),Ra(b.toString(),a,n,i)}},Ra=function(e,t,n,a){var r=G.a.get(n,t);if(r&&r.attributes){r.attributes["line-height"]=e;var i=G.a.set(n,t,r);i&&a(Object(ee.a)({},i))}},Ba="children[0].children[1]",qa=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a=Object(r.useState)(""),i=Object(P.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)(!1),l=Object(P.a)(s,2),d=l[0],u=l[1];Object(r.useEffect)((function(){if(t){var e=t.children[0].children[1];if(e&&e.tagName.includes("style")){var n=e.content;c(n)}}}),[]),Object(r.useEffect)((function(){if(t&&!1===d){var e=t.children[0].children[1];if(e&&e.tagName.includes("style")){var n=e.content;c(n)}}}),[t]);return Object(m.jsx)(R.a.Item,{children:Object(m.jsxs)(A.a,{gutter:[0,8],children:[Object(m.jsx)(E.a,{span:24}),Object(m.jsx)(E.a,{span:24,children:Object(m.jsx)(B.a.TextArea,{spellCheck:!1,rows:24,onFocus:function(e){u(!0)},onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||u(!1)},onChange:function(e){var a=e.target.value;if(c(a),a){var r=G.a.get(G.a.cloneDeep(t),Ba);if(r&&r.tagName.includes("style")){r.content=a;var i=G.a.set(t,Ba,r);n(Object(ee.a)({},i))}}},value:o})})]})})},Ha=n(2089),Fa=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a=Object(r.useState)([]),i=Object(P.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)(!1),l=Object(P.a)(s,2),d=l[0],u=l[1];Object(r.useEffect)((function(){if(t){var e=t.children[0];if(e&&e.children){var n=e.children.filter((function(e){return e&&e.tagName&&e.tagName.includes("font")}));n.length>0&&n.lenght!==o.length&&c(n)}}}),[]),Object(r.useEffect)((function(){if(t){var e=t.children[0];if(e&&e.children){var n=e.children.filter((function(e){return e&&e.tagName&&e.tagName.includes("font")}));n.length>0&&n.lenght!==o.length&&c(n)}}}),[t]);return Object(m.jsx)(Tt.a,{children:Object(m.jsxs)(A.a,{children:[Object(m.jsx)(E.a,{span:24,style:{justifyContent:"center",paddingBottom:"24px",display:"flex",rowGap:"6px",flexWrap:"wrap"},children:o&&o.length>0&&o.map((function(e,a){return e.attributes&&e.attributes.href&&e.attributes.name?Object(m.jsx)(xn.a,{title:e.attributes.href,children:Object(m.jsx)(Ha.a,{closable:!0,onClose:function(){return function(e){var a=G.a.cloneDeep(t.children[0]);if(a&&a.children){var r=a.children.filter((function(t){return!(t&&t.tagName&&t.tagName.includes("font"))||t.attributes.name!==e}));a.children=r,c(r);var i=G.a.set(t,"children[0]",a);i&&(c(a.children.filter((function(e){return e&&e.tagName&&e.tagName.includes("font")}))),n(Object(ee.a)({},i)))}}(e.attributes.name)},children:e.attributes.name})},a):null}))}),Object(m.jsx)(E.a,{span:24,style:{textAlign:"center"},children:Object(m.jsx)(tt.a,{visible:d,trigger:"click",placement:"bottom",content:Object(m.jsx)(Wa,{addCustomFontClick:function(e,a){if(t){var r=G.a.cloneDeep(t.children[0]);if(r&&r.children){r.children.push({tagName:"mj-font",attributes:{name:e,href:a}});var i=G.a.set(t,"children[0]",r);i&&(c(r.children.filter((function(e){return e&&e.tagName&&e.tagName.includes("font")}))),n(Object(ee.a)({},i)))}}},popOverCallBacK:u}),children:Object(m.jsx)(j.a,{onClick:function(e){return u(!d)},children:"Add custom font"})})})]})})},Ua=f.a.div(Un||(Un=Object(p.a)(["\n  .ant-form-item {\n    margin-bottom: 8px;\n  }\n"]))),Wa=function(e){var t=e.addCustomFontClick,n=e.popOverCallBacK,a=Object(r.useState)(""),i=Object(P.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)(""),l=Object(P.a)(s,2),d=l[0],u=l[1];return Object(m.jsxs)(Ua,{children:[Object(m.jsx)(Tt.a,{children:Object(m.jsx)(B.a,{addonBefore:"name",value:o,onChange:function(e){return c(e.target.value)}})}),Object(m.jsx)(Tt.a,{children:Object(m.jsx)(B.a,{addonBefore:"url",value:d,onChange:function(e){return u(e.target.value)}})}),Object(m.jsxs)(Tt.a,{style:{textAlign:"center"},children:[Object(m.jsx)(j.a,{onClick:function(){n(!1),o&&d&&t(o,d)},children:"add"}),Object(m.jsx)(j.a,{style:{marginLeft:"6px"},onClick:function(){n(!1)},children:"cancel"})]})]})},Va=ja.a.TabPane,Ya=Object(f.a)(ja.a)(Wn||(Wn=Object(p.a)(["\n  .ant-tabs-content {\n    height: 100%;\n  }\n  .ant-tabs-tab {\n    padding: 8px 16px !important;\n  }\n  .ant-tabs-tabpane {\n    padding-right: 0px !important;\n  }\n"]))),Xa=function(e){var t=e.title;return Object(m.jsx)(m.Fragment,{children:t.split(" ").map((function(e,t){return Object(m.jsxs)(r.Fragment,{children:[0!==t&&Object(m.jsx)("br",{}),Object(m.jsx)("span",{style:{fontSize:"12px"},children:e})]},t+e)}))})},Ga=function(){var e=je().active,t=Object(r.useState)(!1),n=Object(P.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){e&&e.classList&&e.className.includes("mj-column")&&i(!0),a&&i(!1)}),[e]),Object(m.jsxs)(Ya,{tabPosition:"right",defaultActiveKey:"2",style:{height:"100%"},destroyInactiveTabPane:!0,title:"Attributes",size:"small",tabBarGutter:1,children:[Object(m.jsx)(Va,{tab:Object(m.jsx)(Xa,{title:"layout"}),children:Object(m.jsx)(T.Scrollbars,{style:{height:"100%"},autoHide:!0,children:Object(m.jsx)("div",{className:xe.a.columns,children:Object(m.jsx)(ma,{})})})},"2"),Object(m.jsx)(Va,{tab:Object(m.jsx)(Xa,{title:"layout config"}),children:Object(m.jsx)(T.Scrollbars,{style:{height:"100%"},autoHide:!0,children:Object(m.jsx)(za,{})})},"3"),Object(m.jsx)(Va,{tab:Object(m.jsx)(Xa,{title:"body config"}),children:Object(m.jsx)(T.Scrollbars,{style:{height:"100%"},autoHide:!0,children:Object(m.jsx)(kt,{})})},"4"),Object(m.jsx)(Va,{tab:Object(m.jsx)(Xa,{title:"fonts config"}),children:Object(m.jsx)(T.Scrollbars,{style:{height:"100%"},autoHide:!0,children:Object(m.jsxs)(yt,{children:[Object(m.jsx)(wt,{title:"Fonts"}),Object(m.jsx)("div",{className:"props-container",children:Object(m.jsx)(Fa,{})})]})})},"5"),Object(m.jsx)(Va,{tab:Object(m.jsx)(Xa,{title:"custom css"}),children:Object(m.jsx)(T.Scrollbars,{style:{height:"100%"},autoHide:!0,children:Object(m.jsxs)(yt,{children:[Object(m.jsx)(wt,{title:"Custom css"}),Object(m.jsx)("div",{className:"props-container",children:Object(m.jsx)(qa,{})})]})})},"6")]})},Ka=function(){var e=fe().mjmlJson,t=je(),n=t.active,a=(t.setActive,Object(r.useState)(!1)),i=Object(P.a)(a,2),o=i[0],c=i[1],s=Object(r.useState)(!1),l=Object(P.a)(s,2),d=l[0],u=l[1],b=Object(r.useState)(!1),p=Object(P.a)(b,2),j=p[0],f=p[1];return Object(r.useEffect)((function(){n&&!j&&f(!0),n&&(n.classList&&n.className.includes("mj-column")||n.classList&&n.className.includes("mj-body"))?c(!0):o&&c(!1)}),[n]),Object(r.useEffect)((function(){u(!(o||!n))}),[o,n]),j?Object(m.jsx)(fa.a,{destroyOnClose:!0,width:"100%",getContainer:!1,title:Object(m.jsx)("div",{style:{textAlign:"center"},children:Object(m.jsx)("span",{children:"Attributes"})}),style:{position:"absolute",height:"100%"},onClose:function(){u(!1)},visible:d,maskClosable:!1,mask:!1,bodyStyle:{padding:"8px 0px"},children:Object(m.jsx)(T.Scrollbars,{style:{height:"100%"},autoHide:!0,children:Object(m.jsxs)("div",{className:xe.a.mods,onMouseDown:function(t){Q.newAction(e)},onBlur:function(t){Q.newAction(e)},children:[Object(m.jsx)(gt,{}),Object(m.jsx)(xt,{}),Object(m.jsx)(Mn,{}),Object(m.jsx)(Na,{}),Object(m.jsx)(oa,{}),Object(m.jsx)(_a,{}),Object(m.jsx)(sa,{}),Object(m.jsx)(wa,{}),Object(m.jsx)(pa,{}),Object(m.jsx)(ba,{}),Object(m.jsx)(na,{}),Object(m.jsx)(pt,{}),Object(m.jsx)(Ta,{}),Object(m.jsx)(Zn,{}),Object(m.jsx)(Zn,{label:"Border Width",attribute_name:"border-width"}),Object(m.jsx)(Zn,{label:"Border Style",attribute_name:"border-style"}),Object(m.jsx)(pt,{label:"Border Color",overrideAttribute:"border-color"}),Object(m.jsx)(ea,{}),Object(m.jsx)(Mt,{}),Object(m.jsx)(da,{})]})})}):null},Qa=n(2085),Za=n(180),$a=n.n(Za),er=function(e){var t=e.background,n=e.label;return Object(m.jsxs)("div",{className:$a.a.wrapper,children:[Object(m.jsx)("div",{className:"".concat($a.a.container," ").concat($a.a[t])}),Object(m.jsx)("span",{children:n})]})},tr=["align","background-color","border","border-bottom","border-left","border-radius","border-right","border-top","color","container-background-color","css-class","font-family","font-size","font-style","font-weight","height","href","inner-padding","letter-spacing","line-height","padding","padding-bottom","padding-left","padding-right","padding-top","rel","target","text-align","text-decoration","text-transform","title","vertical-align","width"],nr={align:"center","background-color":"#414141",border:"none","border-bottom":"","border-left":"","border-radius":"3px","border-right":"","border-top":"",color:"#ffffff","container-background-color":"","css-class":"","font-family":"Ubuntu, Helvetica, Arial, sans-serif","font-size":"13px","font-style":"","font-weight":"normal",height:"",href:"","inner-padding":"10px 25px","letter-spacing":"","line-height":"120%",padding:"10px 25px","padding-bottom":"","padding-left":"","padding-right":"","padding-top":"",rel:"",target:"_blank","text-align":"none","text-decoration":"none","text-transform":"none",title:"","vertical-align":"middle",width:""},ar={align:"center","background-color":"#414141",border:"none","border-radius":"3px",color:"#ffffff","font-family":"Ubuntu, Helvetica, Arial, sans-serif","font-size":"13px","font-weight":"normal","inner-padding":"10px 25px","line-height":"120%",padding:"10px 25px",target:"_blank","text-align":"none","text-decoration":"none","text-transform":"none","vertical-align":"middle"},rr=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a={tagName:"mj-button",attributes:Object(ee.a)(Object(ee.a)({},ar),{},{"css-class":"mjml-tag identifier-mj-button"}),children:[],content:"button",mutableProperties:tr,mutalbePropertiesWithDefaultValues:nr};return Object(m.jsx)("div",{onDragEnd:function(e){var a=Le(t);n(Object(ee.a)({},a))},onDragStart:function(e){Me(e,a)},draggable:!0,children:Object(m.jsx)(er,{background:"button",label:"Button"})})},ir=["color","font-family","font-size","font-style","font-weight","line-height","letter-spacing","height","text-decoration","text-transform","align","container-background-color","padding","padding-top","padding-bottom","padding-left","padding-right","css-class"],or={color:"#000000","font-family":"Ubuntu, Helvetica, Arial, sans-serif","font-size":"13px","font-style":"","font-weight":"","line-height":"1","letter-spacing":"none",height:"","text-decoration":"","text-transform":"",align:"left","container-background-color":"",padding:"10px 25px","padding-top":"","padding-bottom":"","padding-left":"","padding-right":"","css-class":""},cr={color:"#000000","font-size":"13px","line-height":"1","letter-spacing":"none",align:"center",padding:"10px 25px"},sr=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a={tagName:"mj-text",attributes:Object(ee.a)(Object(ee.a)({},cr),{},{align:"left","padding-left":"0px","padding-right":"0px","css-class":"mjml-tag identifier-mj-text"}),content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque quis dolor auctor.",mutableProperties:ir,mutalbePropertiesWithDefaultValues:or};return Object(m.jsx)("div",{onDragEnd:function(e){var a=Le(t);n(Object(ee.a)({},a))},onDragStart:function(e){Me(e,a)},draggable:!0,children:Object(m.jsx)(er,{background:"text",label:"Text"})})},lr=(n(2065),["align","alt","border","border-top","border-bottom","border-left","border-right","border-radius","container-background-color","css-class","fluid-on-mobile","height","href","name","padding","padding-bottom","padding-left","padding-right","padding-top","rel","sizes","src","srcset","target","title","usemap","width"]),dr={align:"center",alt:"",border:"none","border-top":"none","border-bottom":"none","border-left":"none","border-right":"none","border-radius":"","container-background-color":"","css-class":"","fluid-on-mobile":"",height:"auto",href:"",name:"",padding:"10px 25px","padding-bottom":"","padding-left":"","padding-right":"","padding-top":"",rel:"",sizes:"",src:"",srcset:"",target:"_blank",title:"",usemap:"",width:"100%"},ur={align:"center",border:"none","border-top":"none","border-bottom":"none","border-left":"none","border-right":"none",height:"auto",padding:"10px 25px",target:"_blank",width:"100%"},br=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a={tagName:"mj-image",attributes:Object(ee.a)(Object(ee.a)({},ur),{},{"css-class":"mjml-tag identifier-mj-image",width:"auto",padding:"0px 8px",src:"https://dev.bluepie.in/dnde.png"}),children:[],mutableProperties:lr,mutalbePropertiesWithDefaultValues:dr};return Object(m.jsx)("div",{onDragEnd:function(e){var a=Le(t);n(Object(ee.a)({},a))},onDragStart:function(e){Me(e,a)},draggable:!0,children:Object(m.jsx)(er,{background:"image",label:"Image"})})},pr=["container-background-color","css-class","height","padding","padding-bottom","padding-left","padding-right","padding-top"],jr={"container-background-color":"","css-class":"",height:"20px",padding:"none","padding-bottom":"","padding-left":"","padding-right":"","padding-top":""},fr={height:"20px",padding:"none"},hr=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a={tagName:"mj-spacer",attributes:Object(ee.a)(Object(ee.a)({},fr),{},{"css-class":"mjml-tag identifier-mj-spacer"}),children:[],mutableProperties:pr,mutalbePropertiesWithDefaultValues:jr};return Object(m.jsx)("div",{onDragEnd:function(e){var a=Le(t);n(Object(ee.a)({},a))},onDragStart:function(e){Me(e,a)},draggable:!0,children:Object(m.jsx)(er,{background:"spacer",label:"Spacer"})})},gr=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a={tagName:"mj-text",attributes:{"css-class":"mjml-tag identifier-mj-html html-block",padding:"0px"},mutableProperties:["font-family"],content:'\n    <table border="1" style="width:100%; border-collapse:collapse">\n    <tr style="font-weight:bold">\n      <td>S. No</td> \n      <td>Items</td>\n      <td>Quantity</td>\n      <td align="center">Price</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>egg</td>\n      <td>24</td>\n      <td align="center">$10.00</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>milk</td>\n      <td>5</td>\n      <td align="center">$8</td>\n    </tr>\n    <tr>\n      <td>3</td>\n      <td>curd</td>\n      <td>8</td>\n      <td align="center">$8</td>\n    </tr>\n    </table>\n    '};return Object(m.jsx)("div",{onDragEnd:function(e){var a=Le(t);n(Object(ee.a)({},a))},onDragStart:function(e){Me(e,a)},draggable:!0,children:Object(m.jsx)(er,{background:"html",label:" Html"})})},mr=["border-color","border-style","border-width","container-background-color","css-class","padding","padding-bottom","padding-left","padding-right","padding-top","width","align"],xr={"border-color":"#000000","border-style":"solid","border-width":"4px","container-background-color":"","css-class":"",padding:"10px 25px","padding-bottom":"","padding-left":"","padding-right":"","padding-top":"",width:"100%",align:"center"},vr={"border-color":"#000000","border-style":"solid","border-width":"4px",padding:"10px 25px",width:"100%",align:"center"},Or=function(){var e=fe(),t=e.mjmlJson,n=e.setMjmlJson,a={tagName:"mj-divider",attributes:Object(ee.a)(Object(ee.a)({},vr),{},{padding:"0px","css-class":"mjml-tag identifier-mj-divider"}),children:[],mutableProperties:mr,mutalbePropertiesWithDefaultValues:xr};return Object(m.jsx)("div",{onDragEnd:function(e){var a=Le(t);n(Object(ee.a)({},a))},onDragStart:function(e){Me(e,a)},draggable:!0,children:Object(m.jsx)(er,{background:"divider",label:"Divider"})})},yr=["align","border-radius","color","css-class","container-background-color","font-family","font-size","font-style","font-weight","icon-height","icon-size","inner-padding","line-height","mode","padding","padding-bottom","padding-left","padding-right","padding-top","icon-padding","text-padding","text-decoration"],kr={tagName:"mj-social-element",attributes:{"css-class":"mjml-tag identifier-mj-social-element"},mutableProperties:["align","alt","background-color","border-radius","color","css-class","font-family","font-size","font-style","font-weight","href","icon-height","icon-size","line-height","name","padding","padding-bottom","padding-left","padding-right","padding-top","icon-padding","text-padding","sizes","src","srcset","rel","target","title","text-decoration","vertical-align"]},wr=function(){var e={tagName:"mj-social",attributes:{"css-class":"mjml-tag identifier-mj-social"},children:[Object(ee.a)(Object(ee.a)({},kr),{},{attributes:Object(ee.a)(Object(ee.a)({},kr.attributes),{},{name:"facebook-noshare",href:"https://github.com/aghontpi",src:"https://dev.bluepie.in/assets/facebook.png"})}),Object(ee.a)(Object(ee.a)({},kr),{},{attributes:Object(ee.a)(Object(ee.a)({},kr.attributes),{},{name:"twitter-noshare",href:"https://twitter.com/aghontpi",src:"https://dev.bluepie.in/assets/twitter.png"})}),Object(ee.a)(Object(ee.a)({},kr),{},{attributes:Object(ee.a)(Object(ee.a)({},kr.attributes),{},{name:"youtube-noshare",href:"https://github.com/aghontpi",src:"https://dev.bluepie.in/assets/youtube.png"})}),Object(ee.a)(Object(ee.a)({},kr),{},{attributes:Object(ee.a)(Object(ee.a)({},kr.attributes),{},{name:"github",href:"https://github.com/aghontpi",src:"https://dev.bluepie.in/assets/github.png"})})],mutableProperties:yr};return Object(m.jsx)("div",{onDragStart:function(t){Me(t,e)},draggable:!0,children:Object(m.jsx)(er,{background:"social",label:"Social"})})},Cr=function(){var e=Object(ee.a)(Object(ee.a)({},_e),{},{children:[Pe]}),t=ke().drag.setIsColumn;return Object(m.jsx)("div",{onDragStart:function(n){t(!0),Me(n,e)},draggable:!0,children:Object(m.jsx)(er,{background:"section",label:"Section"})})},Sr=(Qa.a.Panel,function(){return Object(m.jsx)(J.a,{style:{height:"100%"},autoHide:!0,children:Object(m.jsxs)("div",{className:xe.a.components,children:[Object(m.jsx)(Cr,{}),Object(m.jsx)(rr,{}),Object(m.jsx)(sr,{}),Object(m.jsx)(br,{}),Object(m.jsx)(hr,{}),Object(m.jsx)(Or,{}),Object(m.jsx)(gr,{}),Object(m.jsx)(wr,{})]})})}),Nr=n(2086),Ar=(n(2066),Object(f.a)(q.a).attrs({title:"Preview"})(Vn||(Vn=Object(p.a)(["\n  .ant-modal {\n    max-width: unset !important;\n    margin: unset !important;\n  }\n  .ant-modal-centered::before {\n    content: unset !important;\n  }\n  .ant-modal-content {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n  }\n  .ant-modal-body {\n    margin: 0px auto;\n  }\n"])))),Er=f.a.div(Yn||(Yn=Object(p.a)(["\n  position: absolute;\n  bottom: 24px;\n  left: 24px;\n"]))),Dr=function(e){var t=e.visible,n=e.visibleChange,a=e.inframeContent,i=Object(r.useState)("desktop"),o=Object(P.a)(i,2),c=o[0],s=o[1];return Object(m.jsxs)(Ar,{visible:t,onCancel:function(){return n(!1)},onOk:function(){return n(!1)},width:"unset",style:{top:"0px",maxWidth:"unset",paddingBottom:"0px",height:"100%"},bodyStyle:{height:"100%"},maskStyle:{height:"100%"},destroyOnClose:!0,footer:null,children:[Object(m.jsx)(Er,{children:Object(m.jsx)(Tr,{onChange:function(e){e.target.value&&s(e.target.value)},value:c})}),a?Object(m.jsx)("iframe",{title:"Preview",style:{margin:"0px auto"},width:"desktop"===c?"800px":"323px",height:"100%",srcDoc:a}):null]})},Tr=function(e){var t=e.onChange,n=e.value;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Nr.a.Group,{onChange:t,value:n,options:[{label:"desktop",value:"desktop"},{label:"mobile",value:"mobile"}],buttonStyle:"solid",optionType:"button"})})},Jr=Object(r.forwardRef)((function(e,t){var n=fe(),a=n.mjmlJson,i=n.setMjmlJson,o=Object(r.useState)(!1),c=Object(P.a)(o,2),s=c[0],l=c[1],d=pn().getId;Object(r.useImperativeHandle)(t,(function(){return{getHtml:b,getJson:p,loadJson:u}}));var u=function(e,t){try{if(null!==e){var n=JSON.parse(e);if(n){var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=de(e,t);n||(a=Be(a));var r=[];if(a&&a.tagName&&"mjml"===a.tagName&&a.children&&a.children.length>1){for(var i=a.children[0].children,o=0;i&&o<i.length;o++){var c=i[o];c&&(c.tagName.includes("title")||c.tagName.includes("style"))&&r.push(c)}for(var s=G.a.cloneDeep(ae),l=0;s&&l<s.length;l++){var d=s[l];d&&(d.tagName.includes("title")||d.tagName.includes("style"))||r.push(d)}a.children[0].children=r}return F("::import -> processedJson",a),a}(n,d,t);a&&i(Object(ee.a)({},a)),Q.newAction(Object(ee.a)({},a))}}else null===e&&(Q.reset(),i(G.a.cloneDeep(re)))}catch(r){throw new Error("Invalid JSON")}},b=function(){var e="";return a&&(e=ge()(a).html),e},p=function(){var e={};if(a){var t=JSON.stringify(Re(G.a.cloneDeep(a)));t&&(e=t)}return e};return Object(m.jsxs)("div",{className:xe.a.editor,children:[Object(m.jsx)("div",{className:xe.a.bank,children:Object(m.jsx)(Sr,{})}),Object(m.jsxs)("div",{className:xe.a.view,children:[Object(m.jsx)(Dr,{visible:s,visibleChange:function(e){return l(e)},inframeContent:s?ge()(a).html:""}),Object(m.jsx)(j.a,{style:{position:"absolute",top:"8px",right:"16px",zIndex:300},onClick:function(){return l(!0)},children:"Preview"},"3"),Object(m.jsx)(yn,{})]}),Object(m.jsxs)("div",{className:xe.a.attributes,style:{position:"relative"},children:[Object(m.jsx)(Ka,{}),Object(m.jsx)(Ga,{})]})]})})),Mr=Object(r.forwardRef)((function(e,t){return Object(m.jsx)(pe,{children:Object(m.jsx)(Ce,{children:Object(m.jsx)(an,{children:Object(m.jsx)(ye,{children:Object(m.jsx)(bn,{children:Object(m.jsx)(ie,{children:Object(m.jsx)(Jr,{ref:t})})})})})})})})),zr=(n(138),n(300),_.a.Content),Pr="loading",_r=function(){var e=Object(r.useRef)(null),t=Object(b.i)().templateId,n=S(),a=Object(P.a)(n,2),i=a[0],o=a[1],c=o.data,s=o.isError,l=o.isLoading,d=o.isSuccess;Object(r.useEffect)((function(){"new"===t||"undefined"===typeof t?e.current&&e.current.loadJson(null):t&&(I.b.loading({content:"Fetching Template...",key:Pr,duration:0}),i({id:t}))}),[]),Object(r.useEffect)((function(){if(d&&c)try{e.current&&e.current.loadJson(c.response.data)}catch(t){I.b.error("Unable to load template",3)}else d&&!c&&I.b.error("Template is empty",2);d&&I.b.destroy(Pr),s&&I.b.info("Network error, template not fetched.",2)}),[s,l,d,c]);return Object(m.jsx)("div",{style:{flex:"1",display:"flex",width:"100%",height:"100%"},children:Object(m.jsxs)(A.a,{style:{height:"100%",width:"100%"},justify:"center",children:[Object(m.jsx)(b.a,{when:Q.undo.length>1||Q.redo.length>1,message:function(){return"Are you sure you want to leave, your changes will be lost"}}),Object(m.jsx)(E.a,{lg:24,xl:0,children:Object(m.jsx)("div",{style:{textAlign:"center",padding:"40px",paddingTop:"10%"},children:Object(m.jsxs)("h3",{children:["Sorry, You need a device with a larger screen to perform editing, atleast '",">","=1200px'"]})})}),Object(m.jsx)(E.a,{xs:0,xl:24,children:Object(m.jsxs)(_.a,{style:{height:"100%"},children:[Object(m.jsx)(L.a,{ghost:!1,onBack:function(){return window.history.back()},title:"dnde",subTitle:"",style:{borderBottom:"1px solid #e8e8e8"},extra:[Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Lr,{editorRef:e},"4"),Object(m.jsx)(j.a,{onClick:function(t){if(e.current){var n=e.current.getHtml();navigator.clipboard.writeText(n),F("html",n),H("Copied to clipboard & logged in devtools "),t.preventDefault()}},children:"Copy as html"},"2"),Object(m.jsx)(j.a,{onClick:function(t){if(e.current){t.preventDefault();var n=e.current.getJson();F("json",n),navigator.clipboard.writeText(n),H("Copied to Clipboard & logged in devtools ")}},children:"Copy as json"},"1")]})]}),Object(m.jsx)(zr,{children:Object(m.jsx)(Mr,{ref:e})})]})})]})})},Ir="sendMailid",Lr=function(e){var t=e.editorRef,n=R.a.useForm(),a=Object(P.a)(n,1)[0],i=Object(r.useState)(!1),o=Object(P.a)(i,2),c=o[0],s=o[1],u=N(),b=Object(P.a)(u,1)[0];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(j.a,{type:"primary",onClick:function(){return s(!c)},children:"Send Test Mail"},"2"),Object(m.jsx)(Rr,{closable:!1,title:null,visible:c,onOk:function(){a.validateFields().then(function(){var e=Object(d.a)(l.a.mark((function e(n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.current){e.next=15;break}if(!((a=t.current.getHtml())&&a.trim().length>0)){e.next=11;break}return I.b.loading({content:"mail is being sent",key:Ir,duration:0}),s(!1),e.next=7,b({to:n.email,html:t.current.getHtml()}).unwrap().catch((function(e){I.b.error({content:"unable to contact server",key:Ir,duration:0})}));case 7:(r=e.sent)&&(r.success?I.b.success({content:r.success,key:Ir,duration:4}):r.error&&I.b.error({content:r.error,key:Ir,duration:2})),e.next=12;break;case 11:I.b.error("design can not be converted into html");case 12:s(!1),e.next=16;break;case 15:s(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},onCancel:function(){s(!1)},okText:"sendMail",cancelText:"cancel",children:Object(m.jsx)(R.a,{layout:"vertical",form:a,children:Object(m.jsx)(R.a.Item,{label:"Email",validateTrigger:"onchange",name:"email",rules:[{required:!0},{type:"email"}],children:Object(m.jsx)(B.a,{})})})})]})},Rr=Object(f.a)(q.a)(Xn||(Xn=Object(p.a)(["\n  .ant-modal-footer {\n    border-top: unset;\n  }\n\n  .ant-form-item {\n    margin-bottom: 0px;\n  }\n\n  .ant-modal-footer {\n    padding-top: 0px;\n  }\n"]))),Br=function(){return Object(m.jsxs)(b.e,{children:[Object(m.jsx)(b.c,{exact:!0,path:["","/list"],component:z}),Object(m.jsx)(b.c,{path:"/template/:templateId",component:_r}),Object(m.jsx)(b.c,{path:"*",children:Object(m.jsx)(b.b,{to:"/"})})]})},qr=(n(2067),n(2068),n(2069),n(133)),Hr=n(22),Fr=Object(Hr.d)({name:"templates",initialState:{templates:[{id:24234234,preview:"https://picsum.photos/320/550"},{id:4535345,preview:"https://picsum.photos/320/400"},{id:976824,preview:"https://picsum.photos/320/600"}]},reducers:{}}).reducer,Ur=n(56),Wr=Object(Hr.a)({reducer:(Gn={},Object(qr.a)(Gn,w.reducerPath,w.reducer),Object(qr.a)(Gn,"templateList",Fr),Gn),middleware:function(e){return e().concat(w.middleware)}}),Vr=function(e){var t=e.children;return Object(m.jsx)(Ur.a,{store:Wr,children:t})};var Yr=function(){return Object(m.jsx)(Vr,{children:Object(m.jsx)(u.a,{getUserConfirmation:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){q.a.confirm({title:t,onOk:function(){return e(!0)},onCancel:function(){return e(!1)}})}));case 2:a=e.sent,n(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:Object(m.jsx)("div",{className:"my-app",children:Object(m.jsx)(Br,{})})})})},Xr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2101)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(Yr,{})}),document.getElementById("root")),Xr()},312:function(e,t,n){},318:function(e,t,n){},514:function(e,t,n){},515:function(e,t,n){},67:function(e,t,n){e.exports={layout:"Editor_layout__2Y-AK",editor:"Editor_editor__qGS4j",bank:"Editor_bank__3JqEw",attributes:"Editor_attributes__32n0a",components:"Editor_components__38eSg",mods:"Editor_mods__3ZWIb",columns:"Editor_columns__1Yrk0",iconsContainer:"Editor_iconsContainer__KxyJq",view:"Editor_view__eaZst",viewHolder:"Editor_viewHolder__3pzWy",title:"Editor_title__24LyS"}}},[[2070,1,2]]]);
//# sourceMappingURL=main.60ee2373.chunk.js.map